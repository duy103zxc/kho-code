<!DOCTYPE HTML>
<html lang="vi" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Jpa - Kho code cá»§a duykhanh471</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../index.html"><strong aria-hidden="true">1.</strong> Trang chá»§ dá»± Ã¡n</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> HTML/CSS/JS</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../html-css/index.html"><strong aria-hidden="true">2.1.</strong> HTML/CSS</a></li><li class="chapter-item expanded "><a href="../js/index.html"><strong aria-hidden="true">2.2.</strong> JS</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../js/co-ban.html"><strong aria-hidden="true">2.2.1.</strong> CÆ¡ báº£n</a></li><li class="chapter-item expanded "><a href="../js/array.html"><strong aria-hidden="true">2.2.2.</strong> Array</a></li><li class="chapter-item expanded "><a href="../js/ngay-gio.html"><strong aria-hidden="true">2.2.3.</strong> NgÃ y giá»</a></li><li class="chapter-item expanded "><a href="../js/string.html"><strong aria-hidden="true">2.2.4.</strong> String</a></li><li class="chapter-item expanded "><a href="../js/object.html"><strong aria-hidden="true">2.2.5.</strong> Object</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../java/index.html"><strong aria-hidden="true">3.</strong> Java</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../java/snippets/index.html"><strong aria-hidden="true">3.1.</strong> Kho snippets</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../java/snippets/algorithms.html"><strong aria-hidden="true">3.1.1.</strong> Algorithms</a></li><li class="chapter-item expanded "><a href="../java/snippets/array.html"><strong aria-hidden="true">3.1.2.</strong> Array</a></li><li class="chapter-item expanded "><a href="../java/snippets/cls.html"><strong aria-hidden="true">3.1.3.</strong> CLS</a></li><li class="chapter-item expanded "><a href="../java/snippets/date.html"><strong aria-hidden="true">3.1.4.</strong> Date</a></li><li class="chapter-item expanded "><a href="../java/snippets/encoding.html"><strong aria-hidden="true">3.1.5.</strong> Encoding & Decoding</a></li><li class="chapter-item expanded "><a href="../java/snippets/file.html"><strong aria-hidden="true">3.1.6.</strong> File</a></li><li class="chapter-item expanded "><a href="../java/snippets/io.html"><strong aria-hidden="true">3.1.7.</strong> IO</a></li><li class="chapter-item expanded "><a href="../java/snippets/math.html"><strong aria-hidden="true">3.1.8.</strong> Math</a></li><li class="chapter-item expanded "><a href="../java/snippets/media.html"><strong aria-hidden="true">3.1.9.</strong> Media</a></li><li class="chapter-item expanded "><a href="../java/snippets/network.html"><strong aria-hidden="true">3.1.10.</strong> Network</a></li><li class="chapter-item expanded "><a href="../java/snippets/string.html"><strong aria-hidden="true">3.1.11.</strong> String</a></li><li class="chapter-item expanded "><a href="../java/snippets/thread.html"><strong aria-hidden="true">3.1.12.</strong> Thread</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../spring-boot/index.html"><strong aria-hidden="true">4.</strong> Spring Boot</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../spring-boot/core.html"><strong aria-hidden="true">4.1.</strong> Core</a></li><li class="chapter-item expanded "><a href="../spring-boot/spring-boot.html"><strong aria-hidden="true">4.2.</strong> Spring Boot</a></li><li class="chapter-item expanded "><a href="../spring-boot/jpa.html" class="active"><strong aria-hidden="true">4.3.</strong> Jpa</a></li><li class="chapter-item expanded "><a href="../spring-boot/ss.html"><strong aria-hidden="true">4.4.</strong> Spring Security</a></li><li class="chapter-item expanded "><a href="../spring-boot/redis.html"><strong aria-hidden="true">4.5.</strong> Redis</a></li></ol></li><li class="chapter-item expanded "><a href="../rust/index.html"><strong aria-hidden="true">5.</strong> Rust</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../rust/thuat-toan.html"><strong aria-hidden="true">5.1.</strong> Thuáº­t toÃ¡n</a></li><li class="chapter-item expanded "><a href="../rust/command-line.html"><strong aria-hidden="true">5.2.</strong> CLI</a></li><li class="chapter-item expanded "><a href="../rust/he-thong.html"><strong aria-hidden="true">5.3.</strong> System</a></li><li class="chapter-item expanded "><a href="../rust/internet.html"><strong aria-hidden="true">5.4.</strong> Internet</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.5.</strong> Tá»‡p</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../rust/tep/epub.html"><strong aria-hidden="true">5.5.1.</strong> EPUB</a></li><li class="chapter-item expanded "><a href="../rust/tep/git.html"><strong aria-hidden="true">5.5.2.</strong> Git</a></li><li class="chapter-item expanded "><a href="../rust/tep/html.html"><strong aria-hidden="true">5.5.3.</strong> HTML</a></li><li class="chapter-item expanded "><a href="../rust/tep/rss.html"><strong aria-hidden="true">5.5.4.</strong> RSS</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../react/index.html"><strong aria-hidden="true">6.</strong> React</a></li><li class="chapter-item expanded "><a href="../react-native/index.html"><strong aria-hidden="true">7.</strong> React Native</a></li><li class="chapter-item expanded "><a href="../bash/tong-hop.html"><strong aria-hidden="true">8.</strong> Bash</a></li><li class="chapter-item expanded "><a href="../regex/tong-hop.html"><strong aria-hidden="true">9.</strong> Regex</a></li><li class="chapter-item expanded "><a href="../khac/yt-dlp.html"><strong aria-hidden="true">10.</strong> yt-dlp</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Kho code cá»§a duykhanh471</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="jpahibernate-lÃ -gÃ¬"><a class="header" href="#jpahibernate-lÃ -gÃ¬">ã€ŒJpaã€Hibernate lÃ  gÃ¬?</a></h1>
<ul>
<li>Giá»›i thiá»‡u</li>
<li>Äá»‹nh nghÄ©a</li>
<li>POJO</li>
<li>Mapping dá»¯ liá»‡u</li>
<li>Session</li>
<li>Hibernate Query Language (HQL)</li>
</ul>
<h3 id="giá»›i-thiá»‡u"><a class="header" href="#giá»›i-thiá»‡u"><strong>Giá»›i thiá»‡u</strong></a></h3>
<p><code>Hibernate</code>Â lÃ  framework Ä‘Æ°á»£c sá»­ dá»¥ng nhiá»u nháº¥t hiá»‡n nay Ä‘á»ƒ giÃºp láº­p trÃ¬nh viÃªn Java cÃ³ thá»ƒ map cÃ¡c class (Pojo) vá»›i má»™t cÆ¡ sá»Ÿ dá»¯ liá»‡u báº¥t ká»³.</p>
<p>TrÆ°á»›c khiÂ <code>Hibernate</code>Â ra Ä‘á»i, chÃºng ta thÆ°á»ng thao tÃ¡c vá»›i cÆ¡ sá»Ÿ dá»¯ liá»‡u thÃ´ng quaÂ <code>JDBC</code>. Theo thá»i gian,Â <code>JDBC</code>Â bá»™c lá»™ nhiá»u Ä‘iá»ƒm yáº¿u nhÆ°:</p>
<ul>
<li>CÃ³ nhiá»u code thá»«a mÃ  chá»‰ phá»¥c vá»¥ má»¥c Ä‘Ã­ch lÃ  láº¥y dá»¯ liá»‡u.</li>
<li>Máº¥t nhiá»u thá»i gian map dá»¯ liá»‡u vÃ o object Java.</li>
<li>Sáº½ tá»‘n nhiá»u cÃ´ng sá»©c khi há»‡ thá»‘ng thay Ä‘á»•i CSDL (yÃªu cáº§uÂ <code>jdbc</code>Â má»›i, code má»›i)</li>
<li>Giao tiáº¿p giá»¯a cÃ¡c báº£ng thÆ°á»ng khÃ³, thiáº¿u tÃ­nh OOP trong Ä‘Ã³.</li>
</ul>
<p>Tá»« Ä‘Ã¢y, Ä‘á»ƒ giáº£m táº£i gÃ¡nh náº·ng cho dev khi thao tÃ¡c vá»›i database.Â <code>Hibernate</code>Â ra Ä‘á»i!</p>
<h3 id="Äá»‹nh-nghÄ©a"><a class="header" href="#Äá»‹nh-nghÄ©a"><strong>Äá»‹nh nghÄ©a</strong></a></h3>
<p><code>Hibernate</code>Â lÃ  má»™t thÆ° viá»‡nÂ <code>ORM (Object Relational Mapping)</code>Â mÃ£ nguá»“n má»Ÿ giÃºp láº­p trÃ¬nh viÃªn viáº¿t á»©ng dá»¥ng Java cÃ³ thá»ƒ map cÃ¡c objects (pojo) vá»›i há»‡ quáº£n trá»‹ cÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡, vÃ  há»— trá»£ thá»±c hiá»‡n cÃ¡c khÃ¡i niá»‡m láº­p trÃ¬nh hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng vá»›i cá»› dá»¯ liá»‡u quan há»‡.</p>
<p>Hiá»ƒu ngáº¯n gá»n thÃ¬Â <code>Hibernate</code>Â sáº½ lÃ  má»™t layer Ä‘á»©ng trung gian giá»¯a á»©ng dá»¥ng vÃ  database, vÃ  chÃºng ta sáº½ giao tiáº¿p vá»›iÂ <code>Hibernate</code>Â thay vÃ¬ giao tiáº¿p vá»›i database</p>
<p>!image</p>
<p>Äá»ƒ giao tiáº¿p vá»›iÂ <code>Hibernate</code>, chÃºng ta sáº½ táº¡o ra má»™tÂ <code>Class</code>Â Ä‘áº¡i diá»‡n cho má»™tÂ <code>Table</code>. VÃ  má»i dá»¯ liá»‡u tá»«Â <code>Table</code>Â trong database sáº½ Ä‘Æ°á»£cÂ <code>Hibernate</code>Â bind vÃ oÂ <code>Class</code>Â Ä‘Ã³ cho chÃºng ta.</p>
<h3 id="pojo"><a class="header" href="#pojo"><strong>POJO</strong></a></h3>
<p><code>Pojo (plain old Java object)</code>Â lÃ  class Ä‘áº¡i diá»‡n cho má»™tÂ <code>Table</code>, thuáº­t ngá»¯ nÃ y Ä‘á»ƒ Ä‘á»‹nh nghÄ©a chÃ­nh xÃ¡c thÃ¬ mÃ¬nh khÃ´ng dÃ¡m cháº¯c, nhÆ°ng vá» Ã½ nghÄ©a thÃ¬ nÃ³ lÃ  má»™t class java thuáº§n tÃºy, ráº¥t thuáº§n tÃºy:</p>
<ol>
<li>All properties must public setter and getter methods (má»i biáº¿n Ä‘á»u pháº£i cÃ³ get/set)</li>
<li>All instance variables should be private (má»i biáº¿n lÃ  thuá»™c tÃ­nh thÃ¬ nÃªn lÃ  private)</li>
</ol>
<pre><code>public class MyFirstPojo
{
    private String name;

    public static void main(String [] args)
    {
       for (String arg : args)
       {
          MyFirstPojo pojo = new MyFirstPojo(arg);  // Here's how you create a POJO
          System.out.println(pojo);
       }
    }

    public MyFirstPojo(String name)
    {
        this.name = name;
    }

    public String getName() { return this.name; }

    public String toString() { return this.name; }
}
</code></pre>
<h3 id="mapping-dá»¯-liá»‡u"><a class="header" href="#mapping-dá»¯-liá»‡u"><strong>Mapping dá»¯ liá»‡u</strong></a></h3>
<p>Khi Ä‘Ã£ cÃ³Â <code>Class</code>Â Ä‘áº¡i diá»‡n choÂ <code>Table</code>Â rá»“i, chÃºng ta sáº½ Ä‘á»‹nh nghÄ©a cÃ¡c trÆ°á»ng trong class Ä‘Ã³ tÆ°Æ¡ng á»©ng vá»›i column nÃ o trong database báº±ng táº­p há»£p cÃ¡cÂ <code>Annotaion</code>Â mÃ Â <code>Hibernate</code>Â cung cáº¥p.</p>
<pre><code>@Entity // ÄÃ¡nh dáº¥u Ä‘Ã¢y lÃ  má»™t Entity, chá»‹u sá»± quáº£n lÃ½ cá»§a Hibernate
@Table(name = &quot;USER&quot;) //Entity nÃ y Ä‘áº¡i diá»‡n cho table USER trong db
public class UserModel {
    @Id // ÄÃ¡nh dáº¥u biáº¿n á»Ÿ dÆ°á»›i lÃ  primary key cá»§a table nÃ y
    @GeneratedValue(strategy = GenerationType.IDENTITY) // Tá»± Ä‘á»™ng tÄƒng giÃ¡ trá»‹ khi insert
    private Long id;

    @Column(name = &quot;email&quot;, unique = true) // trÆ°á»ng email á»Ÿ dÆ°á»›i Ä‘áº¡i diá»‡n cho cá»™t email trong database
    private String email;

    @Column(name = &quot;name&quot;)
    private String name;

    public Long getId() {
        return this.id;
    }
    public void setId(Long id) {
        this.id = id;
    }
    public String getEmail() {
        return email;
    }
    public void setEmail(String email) {
        this.email = email;
    }
    public String getName() {
        return this.name;
    }
    public void setName(String name) {
        this.name = name;
    }
}
</code></pre>
<p>BÃ¢y giá» viá»‡c báº¡n láº¥y dá»¯ liá»‡u tá»« database sáº½ Ä‘áº¡i loáº¡i nhÆ° nÃ y:</p>
<pre><code>public List&lt;User&gt; findAll() {
    return session.createQuery(&quot;SELECT a FROM User a&quot;, User.class).getResultList();
}
</code></pre>
<p>ChÃºng ta tiáº¿t kiá»‡m Ä‘Æ°á»£c ráº¥t nhiá»u thá»i gian cho viá»‡c mapping dá»¯ liá»‡u tá»« database sang class java, vÃ  Ä‘áº·c biá»‡t lÃ  khi thay Ä‘á»•i Database thÃ¬ cÅ©ng sáº½ khÃ´ng áº£nh hÆ°á»Ÿng gÃ¬ tá»›i Ä‘oáº¡n code á»Ÿ trÃªn cáº£, chÃºng ta gáº§n nhÆ° trong suá»‘t vá»›i táº§ng database, mÃ  chá»‰ cáº§n nÃ³i chuyá»‡n vá»›iÂ <code>Hibernate</code>Â lÃ  Ä‘á»§!</p>
<h3 id="session"><a class="header" href="#session"><strong>Session</strong></a></h3>
<p>Äá»‘i tÆ°á»£ng chÃ­nh cá»§a viá»‡c truy xuáº¥t hay insert dá»¯ liá»‡u báº±ngÂ <code>Hibernate</code>Â chÃ­nh lÃ Â <code>Session</code>Â vÃ  Ä‘Æ°á»£c táº¡o ra tá»«Â <code>Session Factory</code>.</p>
<p><code>Session Factory</code>Â LÃ  má»™t interface giÃºp táº¡o ra session káº¿t ná»‘i Ä‘áº¿n database báº±ng cÃ¡ch Ä‘á»c cÃ¡c cáº¥u hÃ¬nh trong má»™t file xml vÃ  má»—i loáº¡i Database khÃ¡c nhau sáº½ cÃ³ má»™t cáº¥u hÃ¬nh khÃ¡c nhau.</p>
<p>File cáº¥u hÃ¬nhÂ <code>hibernate.cfg.xml</code>Â cÃ³ dáº¡ng nhÆ° sau:</p>
<pre><code>&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;!DOCTYPE hibernate-configuration PUBLIC
&quot;-//Hibernate/Hibernate Configuration DTD//EN&quot;
&quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;

&lt;hibernate-configuration&gt;&lt;session-factory&gt;&lt;propertyname=&quot;hibernate.connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;&lt;propertyname=&quot;hibernate.connection.url&quot;&gt;jdbc:mysql://192.168.10.13:3306/loda
&lt;/property&gt;&lt;propertyname=&quot;hibernate.connection.username&quot;&gt;root&lt;/property&gt;&lt;propertyname=&quot;hibernate.connection.password&quot;&gt;root&lt;/property&gt;&lt;propertyname=&quot;hibernate.connection.pool_size&quot;&gt;10&lt;/property&gt;&lt;propertyname=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;&lt;propertyname=&quot;hibernate.current_session_context_class&quot;&gt;thread&lt;/property&gt;&lt;/session-factory&gt;&lt;/hibernate-configuration&gt;
</code></pre>
<p>Khi Ä‘Ã£ cÃ³ file config nÃ y rá»“i, chÃºng ta sá»­ dá»¥ng nÃ³ Ä‘á»ƒ táº¡o raÂ <code>Session Factory</code>Â nhÆ° sau:</p>
<pre><code>public class SessionFactoryProvider {

    private static SessionFactory buildSessionFactory() {
        ServiceRegistry serviceRegistry = new StandardServiceRegistryBuilder()//
                .configure(&quot;hibernate.cfg.xml&quot;).build();

        Metadata metadata = new MetadataSources(serviceRegistry).getMetadataBuilder().build();

        return metadata.getSessionFactoryBuilder().build();
    }
}
</code></pre>
<p>Tá»« Ä‘Ã³, má»—i láº§n cáº§n query hay insert dá»¯ liá»‡u, chÃºng ta sáº½ táº¡o raÂ <code>Session</code>Â vÃ  sá»­ dá»¥ng.</p>
<pre><code>SessionFactory factory = HibernateSessionUtils.getSessionFactory();

Session session = factory.getCurrentSession();

try {
    session.getTransaction().begin();

    List&lt;User&gt; users = session.createQuery(&quot;SELECT a FROM User a&quot;, User.class).getResultList();

    session.getTransaction().commit();
}catch (Exception e) {}
</code></pre>
<h3 id="hibernate-query-language-hql"><a class="header" href="#hibernate-query-language-hql"><strong>Hibernate Query Language (HQL)</strong></a></h3>
<p><code>Hibernate</code>Â sá»­ dá»¥ng ngÃ´n ngá»¯Â <code>Hibernate Query Language (HQL)</code>Â Ä‘á»ƒ query dá»¯ liá»‡u. NÃ³ chá»‰ khÃ¡cÂ <code>SQL</code>Â bÃ¬nh thÆ°á»ng á»Ÿ chá»—, Ä‘á»‘i tÆ°á»£ng tÃ¡c Ä‘á»™ng lÃºc nÃ y lÃ Â <code>Entity</code>Â chá»© khÃ´ng cÃ²n lÃ Â <code>Table</code>Â ná»¯a:</p>
<p>vÃ­ dá»¥:</p>
<pre><code>-- SQL
-- from table name
Select u.id, u.email from USER u;

-- HQL
-- from class name
Select u.id, u.email from User u;

-- query toÃ n bá»™ object
Select u from User u;
</code></pre>
<p>Äang viáº¿t dá»Ÿ Continue...</p>
<ol>
<li><a href="">ğŸª‚ã€ŒJpaã€HÆ°á»›ng dáº«n sá»­ dá»¥ng @OneToOne</a></li>
<li><a href="">ğŸš…ã€ŒJpaã€HÆ°á»›ng dáº«n @OneToMany vÃ  @ManyToOne</a></li>
<li><a href="">ğŸ›µã€ŒJpaã€HÆ°á»›ng dáº«n @ManyToMany</a></li>
</ol>
<p>ğŸ’Â Náº¿u cÃ³, toÃ n bá»™ project / code máº«u Ä‘Æ°á»£c lÆ°u trá»¯ táº¡i <strong>GitHub</strong></p>
<p>ğŸŒŸÂ ÄÃ¢y lÃ  má»™t bÃ i viáº¿t trongÂ Series <strong>LÃ m chá»§ Spring Boot â€“ Zero to Hero</strong></p>
<h1 id="jpa-hÆ°á»›ng-dáº«n-sá»­-dá»¥ng-specification-pháº§n-1"><a class="header" href="#jpa-hÆ°á»›ng-dáº«n-sá»­-dá»¥ng-specification-pháº§n-1">ã€ŒJpaã€ HÆ°á»›ng dáº«n sá»­ dá»¥ng Specification (Pháº§n 1)</a></h1>
<h3 id="giá»›i-thiá»‡u-1"><a class="header" href="#giá»›i-thiá»‡u-1"><strong>Giá»›i thiá»‡u</strong></a></h3>
<p>Trong má»™t bÃ i viáº¿t gáº§n nháº¥t vá»Â Â tÃ´i Ä‘Ã£ hÆ°á»›ng dáº«n cÃ¡c báº¡n cÃ¡ch xÃ¢y dá»±ng cÃ¡c cÃ¢u query xuá»‘ng Database báº±ng cÃ¡c API do Hibernate cung cáº¥p.</p>
<p>VÃ  trong má»™t bÃ i viáº¿t khÃ¡c vá» JPA Repository thÃ¬ chÃºng ta cÅ©ng Ä‘Ã£ biáº¿t cÃ¡ch custom cÃ¡c query báº±ng cÃ¡ch Ä‘áº·t tÃªn method:</p>
<ol>
<li>ã€ŒSpring Boot #11ã€ HuÌ›oÌ›Ìng daÌ‚Ìƒn Spring Boot JPA + MySQL</li>
<li>ã€ŒSpring Boot #12ã€ Spring JPA Method + @Query </li>
</ol>
<p>Tuy nhiÃªn, trong cÃ¡c phÆ°Æ¡ng phÃ¡p trÃªn, váº«n sáº½ cÃ²n má»™t sá»‘ cÃ¡c Ä‘iá»ƒm báº¥t cáº­p, vÃ­ dá»¥ nhÆ°Â <code>JpaRepository</code>Â thÃ¬ báº¡n sáº½ pháº£i viáº¿t quÃ¡ nhiá»u method vÃ  má»—i cÃ¡i sáº½ phá»¥c vá»¥ cho má»™t má»¥c Ä‘Ã­ch cá»‘ Ä‘á»‹nh (khÃ´ng thá»ƒ tÃ¡i sá»­ dá»¥ng, reuseable).</p>
<pre><code>public interface UserRepository extends JpaRepository&lt;User, Long&gt; {

  User findByEmailAddress(String emailAddress);

  List&lt;User&gt; findByLastname(String lastname, Sort sort);

  Page&lt;User&gt; findByFirstname(String firstname, Pageable pageable);
}
</code></pre>
<p>Äá»ƒ cÃ³ thá»ƒ tá»‘i Æ°u viá»‡c viáº¿t query má»™t cÃ¡ch linh Ä‘á»™ng hÆ¡n vÃ  cÃ³ thá»ƒ tÃ¡i sá»­ dá»¥ng láº¡i, Spring mang tá»›i cho chÃºng ta interfaceÂ <code>Specification</code>.</p>
<p>LÃºc nÃ y, cÃ¡ch tiáº¿p cáº­n cá»§a viá»‡c xÃ¢y dá»±ng query sáº½ Ä‘áº¡i loáº¡i nhÆ° sau:</p>
<pre><code>userRepository.findAll(Specification.where(hasIdIn(Arrays.asList(1L, 2L, 3L, 4L, 5L)))
                                                .and(hasType(UserType.NORMAL))
                                                .or(hasId(10L)));
</code></pre>
<p>Vá»›i cÃ¡ch Ä‘á»‹nh nghÄ©a nÃ y, chÃºng ta cÃ³ thá»ƒ tÃ¡i sá»­ dá»¥ng query vÃ  tuá»³ biáº¿n nÃ³ má»i lÃºc Ä‘á»ƒ phÃ¹ há»£p vá»›i yÃªu cáº§u.</p>
<p>KhÃ¡i niá»‡mÂ <code>Specification</code>Â Ä‘Æ°á»£c xÃ¢y dá»±ng tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›iÂ <code>Predicate</code>Â trong Hibernate. Báº¡n hÃ£y Ä‘á»c bÃ i dÆ°á»›i trÆ°á»›c khi Ä‘i tiáº¿p vÃ o bÃ i nÃ y: <strong>HuÌ›oÌ›Ìng daÌ‚Ìƒn suÌ›Ì‰ duÌ£ng Criteria API trong Hibernate (PhaÌ‚Ì€n 2)</strong> </p>
<p>Trong bÃ i cÃ³ sá»­ dá»¥ng: Lombok</p>
<h3 id="cÃ i-Ä‘áº·t"><a class="header" href="#cÃ i-Ä‘áº·t"><strong>CÃ i Ä‘áº·t</strong></a></h3>
<p>Nhá»› thÃªmÂ <code>spring-boot-starter-data-jpa</code>Â vÃ o dependencies cá»§a báº¡n.</p>
<p>Trong pháº§n nÃ y, tÃ´i xÃ iÂ <em>H2 database</em>Â Ä‘á»ƒ demo. (H2 lÃ  dáº¡ng memory database, nÃ³ sáº½ lÆ°u trong ram vÃ  khi táº¯t chÆ°Æ¡ng trÃ¬nh nÃ³ sáº½ máº¥t sáº¡ch)</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;projectxmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&lt;parent&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&lt;version&gt;2.0.5.RELEASE&lt;/version&gt;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
	&lt;/parent&gt;&lt;groupId&gt;me.loda.spring&lt;/groupId&gt;&lt;artifactId&gt;example-independent-maven-spring-project&lt;/artifactId&gt;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&lt;name&gt;example-independent-maven-spring-project&lt;/name&gt;&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;&lt;properties&gt;&lt;java.version&gt;1.8&lt;/java.version&gt;&lt;/properties&gt;&lt;dependencies&gt;&lt;dependency&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;&lt;scope&gt;runtime&lt;/scope&gt;&lt;optional&gt;true&lt;/optional&gt;&lt;/dependency&gt;&lt;dependency&gt;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&lt;optional&gt;true&lt;/optional&gt;&lt;/dependency&gt;&lt;dependency&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&lt;scope&gt;test&lt;/scope&gt;&lt;!--			&lt;exclusions&gt;--&gt;
			&lt;!--				&lt;exclusion&gt;--&gt;
			&lt;!--					&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;--&gt;
			&lt;!--					&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;--&gt;
			&lt;!--				&lt;/exclusion&gt;--&gt;
			&lt;!--			&lt;/exclusions&gt;--&gt;
		&lt;/dependency&gt;&lt;!--spring jpa--&gt;
		&lt;dependency&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&lt;/dependency&gt;&lt;!--in memory database--&gt;
		&lt;dependency&gt;&lt;groupId&gt;com.h2database&lt;/groupId&gt;&lt;artifactId&gt;h2&lt;/artifactId&gt;&lt;scope&gt;runtime&lt;/scope&gt;&lt;/dependency&gt;&lt;!--https://mvnrepository.com/artifact/org.hibernate/hibernate-jpamodelgen --&gt;
		&lt;dependency&gt;&lt;groupId&gt;org.hibernate&lt;/groupId&gt;&lt;artifactId&gt;hibernate-jpamodelgen&lt;/artifactId&gt;&lt;version&gt;5.4.9.Final&lt;/version&gt;&lt;scope&gt;provided&lt;/scope&gt;&lt;/dependency&gt;&lt;/dependencies&gt;&lt;build&gt;&lt;plugins&gt;&lt;plugin&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&lt;/plugin&gt;&lt;/plugins&gt;&lt;/build&gt;&lt;/project&gt;
</code></pre>
<p>ChÃº Ã½, xem kÄ© hÆ¡nÂ <code>hibernate-jpamodelgen</code>Â trong bÃ i viáº¿tÂ </p>
<h3 id="specification"><a class="header" href="#specification"><strong>Specification</strong></a></h3>
<p><code>Specification</code>Â lÃ  má»™t cÃ¡ch Ä‘á»ƒ Ä‘á»‹nh nghÄ©a cÃ¡cÂ <code>Predicate</code>Â cÃ³ thá»ƒ tÃ¡i sá»­ dá»¥ng Ä‘Æ°á»£c.</p>
<p>Báº£n cháº¥tÂ <code>Specification</code>Â lÃ  má»™t funtional interface vá»›i 1 hÃ m duy nháº¥t nhÆ° sau:</p>
<pre><code>public interface Specification&lt;T&gt; {
  Predicate toPredicate(Root&lt;T&gt; root, CriteriaQuery query, CriteriaBuilder cb);
}
</code></pre>
<p>Tham sá»‘ Ä‘áº§u vÃ o lÃ  3 khÃ¡i niá»‡m tÃ´i Ä‘Ã£ giá»›i thiá»‡u á»Ÿ bÃ iÂ , bao gá»“m:</p>
<ol>
<li><code>Root</code></li>
<li><code>CriteriaQuery</code></li>
<li><code>CriteriaBuilder</code></li>
</ol>
<p>tÃ´i sáº½ demo trÆ°á»›c má»™t sá»‘ implementation cá»§aÂ <code>Specification</code>Â vÃ  Ä‘á» cáº­p cÃ¡ch sá»­ dá»¥ng nÃ³ á»Ÿ phÃ­a dÆ°á»›i:</p>
<p><em>User.java</em></p>
<pre><code>@Entity
@Data
@Builder
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private UserType type;
    private String name;

    public enum UserType {
        NORMAL, VIP;
    }
}
</code></pre>
<p><em>UserSpecification.java</em></p>
<pre><code>public final class UserSpecification {
    /**
     * Láº¥y ra user cÃ³ UserType chá»‰ Ä‘á»‹nh
     * @param type
     * @return
     */
    public static Specification&lt;User&gt; hasType(UserType type) {
        return (root, query, cb) -&gt; cb.equal(root.get(User_.TYPE), type);
    }

    /**
     * Láº¥y ra user cÃ³ id chá»‰ Ä‘á»‹nh
     * @param userId
     * @return
     */
    public static Specification&lt;User&gt; hasId(long userId) {
        return (root, query, cb) -&gt; cb.equal(root.get(User_.ID), userId);
    }

    /**
     * Láº¥y ra user náº±m trong táº­p ID chá»‰ Ä‘á»‹nh
     * @param userIds
     * @return
     */
    public static Specification&lt;User&gt; hasIdIn(Collection&lt;Long&gt; userIds) {
        return (root, query, cb) -&gt; root.get(User_.ID).in(userIds);
    }
}
</code></pre>
<p>TÃ´i Ä‘á»‹nh nghÄ©a ra cÃ¡cÂ <code>static method</code>Â tráº£ ra ngoÃ i lÃ  cÃ¡c implement cá»§aÂ <code>Specification</code>. NÃ³ khÃ´ng háº³n lÃ  Ä‘oáº¡n code Ä‘áº¹p nháº¥t ==! nhÆ°ng nÃ³ lÃ  má»™t cÃ¡ch lÃ m hay Ä‘á»ƒ cÃ³ thá»ƒ Ä‘á»‹nh nghÄ©a má»™t táº­p cÃ¡c Ä‘iá»u kiá»‡n cÃ³ thá»ƒ sá»­ dá»¥ng láº¡i Ä‘Æ°á»£c choÂ <code>User</code>.</p>
<h3 id="jpaspecificationexecutor"><a class="header" href="#jpaspecificationexecutor"><strong>JpaSpecificationExecutor</strong></a></h3>
<p>Äá»ƒ cÃ³ thá»ƒ sá»­ dá»¥ng Ä‘Æ°á»£cÂ <code>Specification</code>, báº¡n cáº§n káº¿ thá»«aÂ <code>JpaSpecificationExecutor</code>Â tá»« Spring JPA</p>
<pre><code>public interface UserRepository extends JpaRepository&lt;User, Long&gt;,
                                        JpaSpecificationExecutor&lt;User&gt; {
}
</code></pre>
<p>LÃºc nÃ y, ngoÃ i cÃ¡c method truyá»n thá»‘ng nhÆ°Â <code>findAll()</code>,Â <code>findOne()</code>,Â <code>findBy()</code>Â thÃ¬ báº¡n sáº½ tháº¥y xuáº¥t hiá»‡n cÃ¡c method má»›i cÃ³ tham sá»‘ Ä‘áº§u vÃ o lÃ Â <code>Specification&lt;T&gt;</code>:</p>
<pre><code>Optional&lt;T&gt; findOne(@Nullable Specification&lt;T&gt; var1);

List&lt;T&gt; findAll(@Nullable Specification&lt;T&gt; var1);

Page&lt;T&gt; findAll(@Nullable Specification&lt;T&gt; var1, Pageable var2);

List&lt;T&gt; findAll(@Nullable Specification&lt;T&gt; var1, Sort var2);

long count(@Nullable Specification&lt;T&gt; var1);
</code></pre>
<h3 id="usage"><a class="header" href="#usage"><strong>Usage</strong></a></h3>
<p>LÃºc nÃ y, Ä‘á»ƒ sá»­ dá»¥ng, báº¡n gá»iÂ <code>Specification.where()</code>Â Ä‘á»ƒ xÃ¢y dá»±ng cho mÃ¬nh táº­p cÃ¡c Ä‘iá»u kiá»‡n Ä‘á»ƒ query</p>
<pre><code>// Láº¥y ra user náº±m trong táº­p ID Ä‘Ã£ cho vÃ  cÃ³ type lÃ  NORMAL
// hoáº·c láº¥y ra user cÃ³ ID = 10
Specification conditions = Specification.where(UserSpecification.hasIdIn(Arrays.asList(1L, 2L, 3L, 4L, 5L)))
                                        .and(UserSpecification.hasType(UserType.NORMAL))
                                        .or(UserSpecification.hasId(10L));
// Truyá»n Specification vÃ o hÃ m findAll()
userRepository.findAll(conditions).forEach(System.out::println);
</code></pre>
<p>OUTPUT:</p>
<pre><code>User(id=1, type=NORMAL, name=name-0)
User(id=2, type=NORMAL, name=name-1)
User(id=5, type=NORMAL, name=name-4)
User(id=10, type=VIP, name=name-9)
</code></pre>
<p>NgoÃ i ra, báº¡n cÃ³ thá»ƒ import trá»±c tiáº¿p cÃ¡c hÃ m static vÃ o Ä‘á»ƒ code gá»n hÆ¡n:</p>
<pre><code>import static me.loda.spring.specification.User.UserType.NORMAL;
import static me.loda.spring.specification.UserSpecification.*;

...
// Láº¥y ra user náº±m trong táº­p ID Ä‘Ã£ cho vÃ  cÃ³ type lÃ  NORMAL
// hoáº·c láº¥y ra user cÃ³ ID = 10
Specification conditions = Specification.where(hasIdIn(Arrays.asList(1L, 2L, 3L, 4L, 5L)))
                                        .and(hasType(NORMAL))
                                        .or(hasId(10L));
// Truyá»n Specification vÃ o hÃ m findAll()
userRepository.findAll(conditions).forEach(System.out::println);
</code></pre>
<p>Gá»n hÆ¡n thÃ¬ khÃ´ng nÃªn táº¡o ra 1 biáº¿n tham chiáº¿u thá»«a thÃ£i:</p>
<pre><code>userRepository.findAll(Specification.where(hasIdIn(Arrays.asList(1L, 2L, 3L, 4L, 5L)))
                                    .and(hasType(NORMAL))
                                    .or(hasId(10L)))
              .forEach(System.out::println);
</code></pre>
<h3 id="káº¿t"><a class="header" href="#káº¿t"><strong>Káº¿t</strong></a></h3>
<p>Tá»›i Ä‘Ã¢y báº¡n Ä‘Ã£ cÃ³ thá»ƒ sá»­ dá»¥ngÂ <code>Specification</code>Â Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c truy váº¥n phá»©c táº¡p vÃ  tÃ¡i sá»­ dá»¥ng Ä‘Æ°á»£c trong nhiá»u trÆ°á»ng há»£p. ÄÃ³n Ä‘á»c cÃ¡c bÃ i sau vá» cÃ¡c pháº§n nÃ¢ng cao hÆ¡n.</p>
<h1 id="jpahÆ°á»›ng-dáº«n-sá»­-dá»¥ng-onetoone"><a class="header" href="#jpahÆ°á»›ng-dáº«n-sá»­-dá»¥ng-onetoone">ã€ŒJpaã€HÆ°á»›ng dáº«n sá»­ dá»¥ng @OneToOne</a></h1>
<ul>
<li>Giá»›i thiá»‡u</li>
<li>Táº¡o project</li>
<li>Táº¡o Table</li>
<li>Cháº¡y thá»­</li>
<li>ThÃªm dá»¯ liá»‡u</li>
</ul>
<h3 id="giá»›i-thiá»‡u-2"><a class="header" href="#giá»›i-thiá»‡u-2"><strong>Giá»›i thiá»‡u</strong></a></h3>
<p>CÃ¡ch biá»ƒu thá»‹ quan há»‡ 1-1 trong cÆ¡ sá»Ÿ dá»¯ liá»‡u lÃ  ráº¥t phá»• biáº¿n, vÃ­ dá»¥ má»™t ngÆ°á»i sáº½ cÃ³ má»™t Ä‘á»‹a chá»‰ duy nháº¥t (giáº£ sá»­).</p>
<p>BÃ¬nh thÆ°á»ng, khi cÃ¡c báº¡n táº¡o table trong csdl Ä‘á»ƒ biá»ƒu thá»‹ má»‘i quan há»‡ nÃ y, thÃ¬ sáº½ cÃ³ má»™t báº£ng chá»©a khÃ³a ngoáº¡i cá»§a báº£ng cÃ²n láº¡i.</p>
<p>!image</p>
<p>Thá»ƒ hiá»‡n má»—i quan há»‡ nÃ y trongÂ <code>code</code>Â báº±ngÂ <code>Hibernate</code>Â thÃ¬ chÃºng ta sáº½ dÃ¹ngÂ <code>@OneToOne</code>.</p>
<p>Trong bÃ i sá»­ dá»¥ng cÃ¡c kiáº¿n thá»©c:</p>
<ol>
<li>Hibernate lÃ  gÃ¬?</li>
<li>CÃ¡ch sá»­ dá»¥ng Lombok Ä‘á»ƒ tiáº¿t kiá»‡m thá»i gian code</li>
</ol>
<h3 id="táº¡o-project"><a class="header" href="#táº¡o-project"><strong>Táº¡o project</strong></a></h3>
<p>ToÃ n bá»™ bÃ i viáº¿t Ä‘Æ°á»£c up táº¡iÂ <code>Github</code>:Â github.com/loda-kun/java-all</p>
<p>ChÃºng ta sáº½ sá»­ dá»¥ngÂ <code>Gradle</code>Â Ä‘á»ƒ táº¡o má»™t project cÃ³ khai bÃ¡oÂ <code>Spring Boot</code>Â vÃ Â <code>Jpa</code>Â Ä‘á»ƒ há»— trá»£ cho viá»‡c demoÂ <code>@OneToOne</code>.</p>
<p>CÃ¡c báº¡n cÃ³ thá»ƒ tá»± táº¡o 1 project Spring-boot vá»›i gradle Ä‘Æ¡n giáº£n táº¡i:Â https://start.spring.io</p>
<pre><code>plugins {
    id 'org.springframework.boot' version '2.1.4.RELEASE'
    id 'java'
}
apply plugin: 'io.spring.dependency-management'

group 'me.loda.java'
version '1.0-SNAPSHOT'

sourceCompatibility = 1.8

configurations {
    compileOnly {
        extendsFrom annotationProcessor
    }
}

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    implementation 'org.springframework.boot:spring-boot-starter-web'
    compileOnly 'org.projectlombok:lombok'
    runtimeOnly 'com.h2database:h2'
    annotationProcessor 'org.projectlombok:lombok'
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
}
</code></pre>
<p>Trong á»©ng dá»¥ng trÃªn báº¡n sáº½ tháº¥y cÃ³Â <code>com.h2database:h2</code>. ÄÃ¢y lÃ  má»™tÂ <strong>database</strong>, tuy nhiÃªn nÃ³ chá»‰ tá»“n táº¡i trong bá»™ nhá»›. Tá»©c lÃ m má»—i khi cháº¡y chÆ°Æ¡ng trÃ¬nh nÃ y, nÃ³ sáº½ táº¡o database trongÂ <code>RAM</code>, vÃ  táº¯t chÆ°Æ¡ng trÃ¬nh Ä‘i nÃ³ sáº½ máº¥t.</p>
<p>ChÃºng ta sáº½ sá»­ dá»¥ngÂ <code>H2</code>Â thay choÂ <code>MySql</code>Â Ä‘á»ƒ cho.. tiá»‡n!</p>
<p>Khi táº¡o xong project, sáº½ cÃ³ thÆ° má»¥c nhÆ° sau:</p>
<p>!image</p>
<h3 id="táº¡o-table"><a class="header" href="#táº¡o-table"><strong>Táº¡o Table</strong></a></h3>
<p>Äá»ƒ táº¡o table, chÃºng ta táº¡o ra cÃ¡cÂ <code>Class</code>Â tÆ°Æ¡ng á»©ng.</p>
<pre><code>import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.OneToOne;

import lombok.Builder;
import lombok.Data;

@Entity // Hibernate entity
@Data // Lombok
@Builder // Lombok
public class Person { //Table person

    @Id // ÄÃ¡nh dáº¥u trÆ°á»ng nÃ y lÃ  primary key
    @GeneratedValue // Tá»± Ä‘á»™ng tÄƒng giÃ¡ trá»‹ id
    private Long id;
    private String name;
}
</code></pre>
<pre><code>@Entity
@Data
@Builder
public class Address { // Table address
    @Id
    @GeneratedValue
    private Long id;

    private String city;
    private String province;

    @OneToOne // ÄÃ¡nh dáº¥u cÃ³ má»—i quan há»‡ 1-1 vá»›i Person á»Ÿ phÃ­a dÆ°á»›i
    @JoinColumn(name = &quot;person_id&quot;) // LiÃªn káº¿t vá»›i nhau qua khÃ³a ngoáº¡i person_id
    private Person person;
}
</code></pre>
<p>Náº¿u chÃºng ta chÆ°a táº¡o ra cÃ¡c table trong cÆ¡ sá»Ÿ dá»¯ liá»‡u, thÃ¬ máº·c Ä‘á»‹nhÂ <code>Hibernate</code>Â sáº½ bind dá»¯ liá»‡u tá»« class xuá»‘ng vÃ  táº¡o table cho chÃºng ta.</p>
<p>Báº¡n pháº£i táº¡o file configÂ <code>src\main\resources\application.properties</code>Â nhÆ° sau Ä‘á»ƒ káº¿t ná»‘i tá»›iÂ <code>H2</code>Â database nhÃ©:</p>
<pre><code>spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
// KhÃ´ng cÃ³ password, vÃ o tháº³ng luÃ´n
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
# Cho phÃ©p vÃ o xem db thÃ´ng qua web
spring.h2.console.enabled=true
</code></pre>
<h3 id="cháº¡y-thá»­"><a class="header" href="#cháº¡y-thá»­"><strong>Cháº¡y thá»­</strong></a></h3>
<p>Báº¡n táº¡o fileÂ <code>OneToOneExampleApplication</code>Â vÃ  cáº¥u hÃ¬nhÂ <code>Spring Boot</code>Â vÃ  khá»Ÿi cháº¡y chÆ°Æ¡ng trÃ¬nh.</p>
<pre><code>@SpringBootApplication
@RequiredArgsConstructor
public class OneToOneExampleApplication {
    public static void main(String[] args) {
        SpringApplication.run(OneToOneExampleApplication.class, args);
    }
}
</code></pre>
<p>Sau khi cháº¡y xong, hÃ£y truy cáº­p vÃ oÂ <code>http://localhost:8080/h2-console/</code>Â Ä‘á»ƒ vÃ o xem database cÃ³ gÃ¬ nhÃ©.</p>
<p>!image</p>
<p>Báº¡n sáº½ tháº¥y nÃ³ táº¡o table giá»‘ng vá»›i mÃ´ táº£ á»Ÿ Ä‘áº§u bÃ i. Vá»›i khÃ³a ngoáº¡iÂ <code>person_id</code>Â á»Ÿ báº£ngÂ <code>address</code>.</p>
<h3 id="thÃªm-dá»¯-liá»‡u"><a class="header" href="#thÃªm-dá»¯-liá»‡u"><strong>ThÃªm dá»¯ liá»‡u</strong></a></h3>
<p>Äá»ƒ thÃªm dá»¯ liá»‡u vÃ o database, chÃºng ta sáº½ dÃ¹ng tá»›iÂ <code>Jpa</code>.</p>
<pre><code>import org.springframework.data.jpa.repository.JpaRepository;

public interface AddressRepository extends JpaRepository&lt;Address,Long&gt; {
}
public interface PersonRepository extends JpaRepository&lt;Person, Long&gt; {
}
</code></pre>
<p>ChÃºng ta sáº½ táº¡o má»™t chÆ°Æ¡ng trÃ¬nhÂ <code>Spring Boot</code>Â Ä‘Æ¡n giáº£n báº±ng cÃ¡ch sá»­ dá»¥ngÂ <code>CommandLineRunner</code>Â Ä‘á»ƒ cháº¡y code ngay khi khá»Ÿi Ä‘á»™ng.</p>
<pre><code>import javax.transaction.Transactional;

import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

import com.google.common.collect.Lists;

import lombok.RequiredArgsConstructor;

@SpringBootApplication
@RequiredArgsConstructor
public class OneToOneExampleApplication implements CommandLineRunner {
    public static void main(String[] args) {
        SpringApplication.run(OneToOneExampleApplication.class, args);
    }

    // Sá»­ dá»¥ng @RequiredArgsConstructor vÃ  final Ä‘á»ƒ thay cho @Autowired
    private final PersonRepository personRepository;
    private final AddressRepository addressRepository;

    @Override
    public void run(String... args) throws Exception {
        // Táº¡o ra Ä‘á»‘i tÆ°á»£ng person
        Person person = Person.builder()
                              .name(&quot;loda&quot;)
                              .build();
        // LÆ°u vÃ o db
        personRepository.save(person);

        // Táº¡o ra Ä‘á»‘i tÆ°á»£ng Address cÃ³ tham chiáº¿u tá»›i person
        Address address = Address.builder()
                .city(&quot;Hanoi&quot;)
                .person(person)
                .build();

        // LÆ°u vÃ o db
        addressRepository.save(address);

        // VÃ o:http://localhost:8080/h2-console/ Ä‘á»ƒ xem dá»¯ liá»‡u Ä‘Ã£ insert
    }
}
</code></pre>
<p>Káº¿t quáº£ trong database lÃºc nÃ y:</p>
<p>!image</p>
<p>Váº­y lÃ  tháº±ngÂ <code>Address</code>Â Ä‘Ã£ liÃªn káº¿t tá»›iÂ <code>Person</code>Â cÃ³Â <code>id=1</code>. ÄÃºng nhÆ° ta mong Ä‘á»£i.</p>
<p>BÃ i viáº¿t cá»§a mÃ¬nh khÃ´ng cÃ²n gÃ¬ Ä‘á»ƒ ngáº¯n hÆ¡n Ä‘Æ°á»£c ná»¯a :((( tháº­t há»• tháº¹n, mÃ¬nh cÃ³ up code lÃªn Ä‘Ã¢y, báº¡n cháº¡y code cÃ¡i lÃ  hiá»ƒu liá»n Ã :</p>
<p>ChÃºc cÃ¡c báº¡n há»c táº­p tá»‘t! ahuu</p>
<ol>
<li><a href="">ğŸš…ã€ŒJpaã€HÆ°á»›ng dáº«n @OneToMany vÃ  @ManyToOne</a></li>
<li><a href="">ğŸ›µã€ŒJpaã€HÆ°á»›ng dáº«n @ManyToMany</a></li>
</ol>
<p>ğŸ’Â Náº¿u cÃ³, toÃ n bá»™ project / code máº«u Ä‘Æ°á»£c lÆ°u trá»¯ táº¡i <strong>GitHub</strong></p>
<p>ğŸŒŸÂ ÄÃ¢y lÃ  má»™t bÃ i viáº¿t trongÂ Series <strong>LÃ m chá»§ Spring Boot â€“ Zero to Hero</strong></p>
<h1 id="jpahÆ°á»›ng-dáº«n-onetomany-vÃ -manytoone"><a class="header" href="#jpahÆ°á»›ng-dáº«n-onetomany-vÃ -manytoone">ã€ŒJpaã€HÆ°á»›ng dáº«n @OneToMany vÃ  @ManyToOne</a></h1>
<ul>
<li>Giá»›i thiá»‡u</li>
<li>Táº¡o project</li>
<li>Táº¡o Table</li>
<li>Cháº¡y thá»­</li>
<li>ThÃªm dá»¯ liá»‡u</li>
</ul>
<h3 id="giá»›i-thiá»‡u-3"><a class="header" href="#giá»›i-thiá»‡u-3"><strong>Giá»›i thiá»‡u</strong></a></h3>
<p>CÃ¡ch biá»ƒu thá»‹ quan há»‡ 1-n trong cÆ¡ sá»Ÿ dá»¯ liá»‡u lÃ  ráº¥t phá»• biáº¿n, vÃ­ dá»¥ má»™t Ä‘á»‹a chá»‰ cÃ³ thá»ƒ cÃ³ nhiá»u ngÆ°á»i á»Ÿ (gia Ä‘Ã¬nh).</p>
<p>BÃ¬nh thÆ°á»ng, khi cÃ¡c báº¡n táº¡o table trong csdl Ä‘á»ƒ biá»ƒu thá»‹ má»‘i quan há»‡ nÃ y, thÃ¬ báº£ng Ä‘áº¡i diá»‡n phÃ­a nhiá»u (phÃ­a n trong cÃ¢u 1-n) sáº½ chá»©a id cá»§a báº£ng tham chiáº¿u (phÃ­a 1 trong cÃ¢u 1-n)</p>
<p>!image</p>
<p>Thá»ƒ hiá»‡n má»—i quan há»‡ nÃ y má»™t cÃ¡ch Ä‘áº§y Ä‘á»§ trongÂ <code>code</code>Â báº±ngÂ <code>Hibernate</code>Â thÃ¬ chÃºng ta sáº½ dÃ¹ngÂ <code>@OneToMany</code>Â vÃ Â <code>@ManyToOne</code>.</p>
<p>Trong bÃ i sá»­ dá»¥ng cÃ¡c kiáº¿n thá»©c:</p>
<ol>
<li>Hibernate lÃ  gÃ¬?</li>
<li>CÃ¡ch sá»­ dá»¥ng Lombok Ä‘á»ƒ tiáº¿t kiá»‡m thá»i gian code</li>
</ol>
<h3 id="táº¡o-project-1"><a class="header" href="#táº¡o-project-1"><strong>Táº¡o project</strong></a></h3>
<p>ToÃ n bá»™ bÃ i viáº¿t Ä‘Æ°á»£c up táº¡iÂ <code>Github</code>:Â github.com/loda-kun/java-all</p>
<p>ChÃºng ta sáº½ sá»­ dá»¥ngÂ <code>Gradle</code>Â Ä‘á»ƒ táº¡o má»™t project cÃ³ khai bÃ¡oÂ <code>Spring Boot</code>Â vÃ Â <code>Jpa</code>Â Ä‘á»ƒ há»— trá»£ cho viá»‡c demoÂ <code>@ManyToOne</code>.</p>
<p>CÃ¡c báº¡n cÃ³ thá»ƒ tá»± táº¡o 1 project Spring-boot vá»›i gradle Ä‘Æ¡n giáº£n táº¡i:Â https://start.spring.io</p>
<pre><code>plugins {
    id 'org.springframework.boot' version '2.1.4.RELEASE'
    id 'java'
}
apply plugin: 'io.spring.dependency-management'

group 'me.loda.java'
version '1.0-SNAPSHOT'

sourceCompatibility = 1.8

configurations {
    compileOnly {
        extendsFrom annotationProcessor
    }
}

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    implementation 'org.springframework.boot:spring-boot-starter-web'
    compileOnly 'org.projectlombok:lombok'
    runtimeOnly 'com.h2database:h2'
    annotationProcessor 'org.projectlombok:lombok'
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
}
</code></pre>
<p>Trong á»©ng dá»¥ng trÃªn báº¡n sáº½ tháº¥y cÃ³Â <code>com.h2database:h2</code>. ÄÃ¢y lÃ  má»™tÂ <strong>database</strong>, tuy nhiÃªn nÃ³ chá»‰ tá»“n táº¡i trong bá»™ nhá»›. Tá»©c lÃ m má»—i khi cháº¡y chÆ°Æ¡ng trÃ¬nh nÃ y, nÃ³ sáº½ táº¡o database trongÂ <code>RAM</code>, vÃ  táº¯t chÆ°Æ¡ng trÃ¬nh Ä‘i nÃ³ sáº½ máº¥t.</p>
<p>ChÃºng ta sáº½ sá»­ dá»¥ngÂ <code>H2</code>Â thay choÂ <code>MySql</code>Â Ä‘á»ƒ cho.. tiá»‡n!</p>
<p>Khi táº¡o xong project, sáº½ cÃ³ thÆ° má»¥c nhÆ° sau:</p>
<p>!image</p>
<h3 id="táº¡o-table-1"><a class="header" href="#táº¡o-table-1"><strong>Táº¡o Table</strong></a></h3>
<p>Äá»ƒ táº¡o table, chÃºng ta táº¡o ra cÃ¡cÂ <code>Class</code>Â tÆ°Æ¡ng á»©ng.</p>
<pre><code>import java.util.Collection;

import javax.persistence.CascadeType;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.OneToMany;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.EqualsAndHashCode;
import lombok.NoArgsConstructor;
import lombok.ToString;

@Entity // ÄÃ¡nh dáº¥u Ä‘Ã¢y lÃ  table trong db
@Data // lombok giÃºp generate cÃ¡c hÃ m constructor, get, set v.v.
@AllArgsConstructor
@NoArgsConstructor
public class Address {

    @Id //ÄÃ¡nh dáº¥u lÃ  primary key
    @GeneratedValue // GiÃºp tá»± Ä‘á»™ng tÄƒng
    private Long id;

    private String city;
    private String province;

    @OneToMany(mappedBy = &quot;address&quot;, cascade = CascadeType.ALL) // Quan há»‡ 1-n vá»›i Ä‘á»‘i tÆ°á»£ng á»Ÿ dÆ°á»›i (Person) (1 Ä‘á»‹a Ä‘iá»ƒm cÃ³ nhiá»u ngÆ°á»i á»Ÿ)
    // MapopedBy trá» tá»›i tÃªn biáº¿n Address á»Ÿ trong Person.
    @EqualsAndHashCode.Exclude // khÃ´ng sá»­ dá»¥ng trÆ°á»ng nÃ y trong equals vÃ  hashcode
    @ToString.Exclude // Khoonhg sá»­ dá»¥ng trong toString()
    private Collection&lt;Person&gt; persons;
}
</code></pre>
<pre><code>@Entity
@Data
@NoArgsConstructor
@AllArgsConstructor
public class Person {

    @Id
    @GeneratedValue
    private Long id;
    private String name;

    // Many to One CÃ³ nhiá»u ngÆ°á»i á»Ÿ 1 Ä‘á»‹a Ä‘iá»ƒm.
    @ManyToOne
    @JoinColumn(name = &quot;address_id&quot;) // thÃ´ng qua khÃ³a ngoáº¡i address_id
    @EqualsAndHashCode.Exclude
    @ToString.Exclude
    private Address address;
}
</code></pre>
<p>Náº¿u chÃºng ta chÆ°a táº¡o ra cÃ¡c table trong cÆ¡ sá»Ÿ dá»¯ liá»‡u, thÃ¬ máº·c Ä‘á»‹nhÂ <code>Hibernate</code>Â sáº½ bind dá»¯ liá»‡u tá»« class xuá»‘ng vÃ  táº¡o table cho chÃºng ta.</p>
<p>Báº¡n pháº£i táº¡o file configÂ <code>src\main\resources\application.properties</code>Â nhÆ° sau Ä‘á»ƒ káº¿t ná»‘i tá»›iÂ <code>H2</code>Â database nhÃ©:</p>
<pre><code>spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
// KhÃ´ng cÃ³ password, vÃ o tháº³ng luÃ´n
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
# Cho phÃ©p vÃ o xem db thÃ´ng qua web
spring.h2.console.enabled=true
</code></pre>
<h3 id="cháº¡y-thá»­-1"><a class="header" href="#cháº¡y-thá»­-1"><strong>Cháº¡y thá»­</strong></a></h3>
<p>Báº¡n táº¡o fileÂ <code>OneToManyExampleApplication</code>Â vÃ  cáº¥u hÃ¬nhÂ <code>Spring Boot</code>Â vÃ  khá»Ÿi cháº¡y chÆ°Æ¡ng trÃ¬nh.</p>
<pre><code>@SpringBootApplication
@RequiredArgsConstructor
public class OneToManyExampleApplication {
    public static void main(String[] args) {
        SpringApplication.run(OneToManyExampleApplication.class, args);
    }
}
</code></pre>
<p>Sau khi cháº¡y xong, hÃ£y truy cáº­p vÃ oÂ <code>http://localhost:8080/h2-console/</code>Â Ä‘á»ƒ vÃ o xem database cÃ³ gÃ¬ nhÃ©.</p>
<p>!image</p>
<p>Báº¡n sáº½ tháº¥y nÃ³ táº¡o table giá»‘ng vá»›i mÃ´ táº£ á»Ÿ Ä‘áº§u bÃ i. Vá»›i khÃ³a ngoáº¡iÂ <code>address_id</code>Â á»Ÿ báº£ngÂ <code>person</code>.</p>
<h3 id="thÃªm-dá»¯-liá»‡u-1"><a class="header" href="#thÃªm-dá»¯-liá»‡u-1"><strong>ThÃªm dá»¯ liá»‡u</strong></a></h3>
<p>Äá»ƒ thÃªm dá»¯ liá»‡u vÃ o database, chÃºng ta sáº½ dÃ¹ng tá»›iÂ <code>Spring JPA</code>Â .</p>
<pre><code>import org.springframework.data.jpa.repository.JpaRepository;

public interface AddressRepository extends JpaRepository&lt;Address,Long&gt; {
}
public interface PersonRepository extends JpaRepository&lt;Person, Long&gt; {
}
</code></pre>
<p>ChÃºng ta sáº½ táº¡o má»™t chÆ°Æ¡ng trÃ¬nhÂ <code>Spring Boot</code>Â Ä‘Æ¡n giáº£n báº±ng cÃ¡ch sá»­ dá»¥ngÂ <code>CommandLineRunner</code>Â Ä‘á»ƒ cháº¡y code ngay khi khá»Ÿi Ä‘á»™ng.</p>
<pre><code>import javax.transaction.Transactional;

import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

import com.google.common.collect.Lists;

import lombok.RequiredArgsConstructor;

@SpringBootApplication
@RequiredArgsConstructor
public class OneToManyExampleApplication implements CommandLineRunner {
    public static void main(String[] args) {
        SpringApplication.run(OneToManyExampleApplication.class, args);
    }

    // Sá»­ dá»¥ng @RequiredArgsConstructor vÃ  final Ä‘á»ƒ thay cho @Autowired
    private final PersonRepository personRepository;
    private final AddressRepository addressRepository;

    @Override
    public void run(String... args) throws Exception {
        // Táº¡o ra Ä‘á»‘i tÆ°á»£ng Address cÃ³ tham chiáº¿u tá»›i person
        Address address = new Address();
        address.setCity(&quot;Hanoi&quot;);

        // Táº¡o ra Ä‘á»‘i tÆ°á»£ng person
        Person person = new Person();
        person.setName(&quot;loda&quot;);
        person.setAddress(address);

        address.setPersons(Collections.singleton(person));
        // LÆ°u vÃ o db
        // ChÃºng ta chá»‰ cáº§n lÆ°u address, vÃ¬ cascade = CascadeType.ALL nÃªn nÃ³ sáº½ lÆ°u luÃ´n Person.
        addressRepository.saveAndFlush(address);

        // VÃ o:http://localhost:8080/h2-console/ Ä‘á»ƒ xem dá»¯ liá»‡u Ä‘Ã£ insert

        personRepository.findAll().forEach(p -&gt; {
            System.out.println(p.getId());
            System.out.println(p.getName());
            System.out.println(p.getAddress());
        });

    }
}
//output:
// 2
// loda
// Address(id=1, city=Hanoi, province=null)
// ChÃºng ta Ä‘Ã£ cÃ³ thá»ƒ gá»i trá»±c tiáº¿p address trong person sau khi query
</code></pre>
<p>Káº¿t quáº£ trong database lÃºc nÃ y:</p>
<p>!image</p>
<p>BÃ i viáº¿t cá»§a mÃ¬nh khÃ´ng cÃ²n gÃ¬ Ä‘á»ƒ ngáº¯n hÆ¡n Ä‘Æ°á»£c ná»¯a :((( tháº­t há»• tháº¹n, mÃ¬nh cÃ³ up code lÃªn Ä‘Ã¢y, báº¡n cháº¡y code cÃ¡i lÃ  hiá»ƒu liá»n Ã :</p>
<p>ChÃºc cÃ¡c báº¡n há»c táº­p tháº­t tá»‘t! ahuu</p>
<ol>
<li><a href="">ğŸª‚ã€ŒJpaã€HÆ°á»›ng dáº«n sá»­ dá»¥ng @OneToOne</a></li>
<li><a href="">ğŸ›µã€ŒJpaã€HÆ°á»›ng dáº«n @ManyToMany</a></li>
</ol>
<p>ğŸ’Â Náº¿u cÃ³, toÃ n bá»™ project / code máº«u Ä‘Æ°á»£c lÆ°u trá»¯ táº¡i <strong>GitHub</strong></p>
<p>ğŸŒŸÂ ÄÃ¢y lÃ  má»™t bÃ i viáº¿t trongÂ Series <strong>LÃ m chá»§ Spring Boot â€“ Zero to Hero</strong></p>
<h1 id="jpahÆ°á»›ng-dáº«n-manytomany"><a class="header" href="#jpahÆ°á»›ng-dáº«n-manytomany">ã€ŒJpaã€HÆ°á»›ng dáº«n @ManyToMany</a></h1>
<ul>
<li>Giá»›i thiá»‡u</li>
<li>Táº¡o project</li>
<li>Táº¡o Table</li>
<li>Cháº¡y thá»­</li>
<li>ThÃªm dá»¯ liá»‡u</li>
</ul>
<h3 id="giá»›i-thiá»‡u-4"><a class="header" href="#giá»›i-thiá»‡u-4"><strong>Giá»›i thiá»‡u</strong></a></h3>
<p>CÃ¡ch biá»ƒu thá»‹ quan há»‡ n-n trong cÆ¡ sá»Ÿ dá»¯ liá»‡u lÃ  ráº¥t phá»• biáº¿n, vÃ­ dá»¥ má»™t Ä‘á»‹a chá»‰ cÃ³ thá»ƒ cÃ³ nhiá»u ngÆ°á»i á»Ÿ (gia Ä‘Ã¬nh). vÃ  má»™t ngÆ°á»i cÃ³ thá»ƒ cÃ³ nhiá»u hÆ¡n má»™t Ä‘á»‹a chá»‰.</p>
<p>BÃ¬nh thÆ°á»ng, khi cÃ¡c báº¡n táº¡o table trong csdl Ä‘á»ƒ biá»ƒu thá»‹ má»‘i quan há»‡ nÃ y, chÃºng ta sáº½ táº¡o ra má»™t báº£ng má»›i, tham chiáº¿u tá»›i cáº£ báº£ng nÃ y.</p>
<p>!image</p>
<p>Thá»ƒ hiá»‡n má»—i quan há»‡ nÃ y má»™t cÃ¡ch Ä‘áº§y Ä‘á»§ trongÂ <code>code</code>Â báº±ngÂ <code>Hibernate</code>Â thÃ¬ chÃºng ta sáº½ dÃ¹ngÂ <code>@ManyToMany</code></p>
<p>Trong bÃ i sá»­ dá»¥ng cÃ¡c kiáº¿n thá»©c:</p>
<ol>
<li>Hibernate lÃ  gÃ¬?</li>
<li>CÃ¡ch sá»­ dá»¥ng Lombok Ä‘á»ƒ tiáº¿t kiá»‡m thá»i gian code</li>
</ol>
<h3 id="táº¡o-project-2"><a class="header" href="#táº¡o-project-2"><strong>Táº¡o project</strong></a></h3>
<p>ToÃ n bá»™ bÃ i viáº¿t Ä‘Æ°á»£c up táº¡iÂ <code>Github</code>:Â github.com/loda-kun/java-all</p>
<p>ChÃºng ta sáº½ sá»­ dá»¥ngÂ <code>Gradle</code>Â Ä‘á»ƒ táº¡o má»™t project cÃ³ khai bÃ¡oÂ <code>Spring Boot</code>Â vÃ Â <code>Jpa</code>Â Ä‘á»ƒ há»— trá»£ cho viá»‡c demoÂ <code>@ManyToMany</code>.</p>
<p>CÃ¡c báº¡n cÃ³ thá»ƒ tá»± táº¡o 1 project Spring-boot vá»›i gradle Ä‘Æ¡n giáº£n táº¡i:Â https://start.spring.io</p>
<pre><code>plugins {
    id 'org.springframework.boot' version '2.1.4.RELEASE'
    id 'java'
}
apply plugin: 'io.spring.dependency-management'

group 'me.loda.java'
version '1.0-SNAPSHOT'

sourceCompatibility = 1.8

configurations {
    compileOnly {
        extendsFrom annotationProcessor
    }
}

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    implementation 'org.springframework.boot:spring-boot-starter-web'
    compileOnly 'org.projectlombok:lombok'
    runtimeOnly 'com.h2database:h2'
    annotationProcessor 'org.projectlombok:lombok'
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
}
</code></pre>
<p>Trong á»©ng dá»¥ng trÃªn báº¡n sáº½ tháº¥y cÃ³Â <code>com.h2database:h2</code>. ÄÃ¢y lÃ  má»™tÂ <strong>database</strong>, tuy nhiÃªn nÃ³ chá»‰ tá»“n táº¡i trong bá»™ nhá»›. Tá»©c lÃ m má»—i khi cháº¡y chÆ°Æ¡ng trÃ¬nh nÃ y, nÃ³ sáº½ táº¡o database trongÂ <code>RAM</code>, vÃ  táº¯t chÆ°Æ¡ng trÃ¬nh Ä‘i nÃ³ sáº½ máº¥t.</p>
<p>ChÃºng ta sáº½ sá»­ dá»¥ngÂ <code>H2</code>Â thay choÂ <code>MySql</code>Â Ä‘á»ƒ cho.. tiá»‡n!</p>
<p>Khi táº¡o xong project, sáº½ cÃ³ thÆ° má»¥c nhÆ° sau:</p>
<p>!image</p>
<h3 id="táº¡o-table-2"><a class="header" href="#táº¡o-table-2"><strong>Táº¡o Table</strong></a></h3>
<p>Äá»ƒ táº¡o table, chÃºng ta táº¡o ra cÃ¡cÂ <code>Class</code>Â tÆ°Æ¡ng á»©ng.</p>
<pre><code>import java.util.Collection;

import javax.persistence.CascadeType;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.JoinTable;
import javax.persistence.ManyToMany;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.EqualsAndHashCode;
import lombok.NoArgsConstructor;
import lombok.ToString;

@Entity // ÄÃ¡nh dáº¥u Ä‘Ã¢y lÃ  table trong db
@Data // lombok giÃºp generate cÃ¡c hÃ m constructor, get, set v.v.
@AllArgsConstructor
@NoArgsConstructor
@Builder
public class Address {

    @Id //ÄÃ¡nh dáº¥u lÃ  primary key
    @GeneratedValue // GiÃºp tá»± Ä‘á»™ng tÄƒng
    private Long id;

    private String city;
    private String province;

    @ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    // Quan há»‡ n-n vá»›i Ä‘á»‘i tÆ°á»£ng á»Ÿ dÆ°á»›i (Person) (1 Ä‘á»‹a Ä‘iá»ƒm cÃ³ nhiá»u ngÆ°á»i á»Ÿ)
    @EqualsAndHashCode.Exclude // khÃ´ng sá»­ dá»¥ng trÆ°á»ng nÃ y trong equals vÃ  hashcode
    @ToString.Exclude // Khoonhg sá»­ dá»¥ng trong toString()

    @JoinTable(name = &quot;address_person&quot;, //Táº¡o ra má»™t join Table tÃªn lÃ  &quot;address_person&quot;
            joinColumns = @JoinColumn(name = &quot;address_id&quot;),  // TRong Ä‘Ã³, khÃ³a ngoáº¡i chÃ­nh lÃ  address_id trá» tá»›i class hiá»‡n táº¡i (Address)
            inverseJoinColumns = @JoinColumn(name = &quot;person_id&quot;) //KhÃ³a ngoáº¡i thá»© 2 trá» tá»›i thuá»™c tÃ­nh á»Ÿ dÆ°á»›i (Person)
    )
    private Collection&lt;Person&gt; persons;
}
</code></pre>
<pre><code>@Entity
@Data
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class Person {

    @Id
    @GeneratedValue
    private Long id;
    private String name;

    // mappedBy trá» tá»›i tÃªn biáº¿n persons á»Ÿ trong Address.
    @ManyToMany(mappedBy = &quot;persons&quot;)
    // LAZY Ä‘á»ƒ trÃ¡nh viá»‡c truy xuáº¥t dá»¯ liá»‡u khÃ´ng cáº§n thiáº¿t. LÃºc nÃ o cáº§n thÃ¬ má»›i query
    @EqualsAndHashCode.Exclude
    @Exclude
    private Collection&lt;Address&gt; addresses;
}
</code></pre>
<p>Náº¿u chÃºng ta chÆ°a táº¡o ra cÃ¡c table trong cÆ¡ sá»Ÿ dá»¯ liá»‡u, thÃ¬ máº·c Ä‘á»‹nhÂ <code>Hibernate</code>Â sáº½ bind dá»¯ liá»‡u tá»« class xuá»‘ng vÃ  táº¡o table cho chÃºng ta.</p>
<p>Báº¡n pháº£i táº¡o file configÂ <code>src\main\resources\application.properties</code>Â nhÆ° sau Ä‘á»ƒ káº¿t ná»‘i tá»›iÂ <code>H2</code>Â database nhÃ©:</p>
<pre><code>spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
// KhÃ´ng cÃ³ password, vÃ o tháº³ng luÃ´n
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
# Cho phÃ©p vÃ o xem db thÃ´ng qua web
spring.h2.console.enabled=true
</code></pre>
<h3 id="cháº¡y-thá»­-2"><a class="header" href="#cháº¡y-thá»­-2"><strong>Cháº¡y thá»­</strong></a></h3>
<p>Báº¡n táº¡o fileÂ <code>ManyToManyExampleApplication</code>Â vÃ  cáº¥u hÃ¬nhÂ <code>Spring Boot</code>Â vÃ  khá»Ÿi cháº¡y chÆ°Æ¡ng trÃ¬nh.</p>
<pre><code>@SpringBootApplication
@RequiredArgsConstructor
public class ManyToManyExampleApplication {
    public static void main(String[] args) {
        SpringApplication.run(ManyToManyExampleApplication.class, args);
    }
}
</code></pre>
<p>Sau khi cháº¡y xong, hÃ£y truy cáº­p vÃ oÂ <code>http://localhost:8080/h2-console/</code>Â Ä‘á»ƒ vÃ o xem database cÃ³ gÃ¬ nhÃ©.</p>
<p>!image</p>
<p>Báº¡n sáº½ tháº¥y nÃ³ táº¡o table giá»‘ng vá»›i mÃ´ táº£ á»Ÿ Ä‘áº§u bÃ i. Gá»“m cÃ³ hai báº£ng chÃ­nh lÃ Â <code>address</code>Â vÃ Â <code>person</code>. NgoÃ i ra, sáº½ táº¡o ra má»™t báº£ng trung gian á»Ÿ giá»¯a liÃªn káº¿t hai báº£ng lÃ Â <code>address_person</code>.</p>
<h3 id="thÃªm-dá»¯-liá»‡u-2"><a class="header" href="#thÃªm-dá»¯-liá»‡u-2"><strong>ThÃªm dá»¯ liá»‡u</strong></a></h3>
<p>Äá»ƒ thÃªm dá»¯ liá»‡u vÃ o database, chÃºng ta sáº½ dÃ¹ng tá»›iÂ <code>Spring JPA</code>Â .</p>
<pre><code>import org.springframework.data.jpa.repository.JpaRepository;

public interface AddressRepository extends JpaRepository&lt;Address,Long&gt; {
}
public interface PersonRepository extends JpaRepository&lt;Person, Long&gt; {
}
</code></pre>
<p>ChÃºng ta sáº½ táº¡o má»™t chÆ°Æ¡ng trÃ¬nhÂ <code>Spring Boot</code>Â Ä‘Æ¡n giáº£n báº±ng cÃ¡ch sá»­ dá»¥ngÂ <code>CommandLineRunner</code>Â Ä‘á»ƒ cháº¡y code ngay khi khá»Ÿi Ä‘á»™ng.</p>
<pre><code>import javax.transaction.Transactional;

import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

import com.google.common.collect.Lists;

import lombok.RequiredArgsConstructor;

@SpringBootApplication
@RequiredArgsConstructor
public class ManyToManyExampleApplication implements CommandLineRunner {
    public static void main(String[] args) {
        SpringApplication.run(ManyToManyExampleApplication.class, args);
    }

    // Sá»­ dá»¥ng @RequiredArgsConstructor vÃ  final Ä‘á»ƒ thay cho @Autowired
    private final PersonRepository personRepository;
    private final AddressRepository addressRepository;

    @Override
    @Transactional
    public void run(String... args) throws Exception {
        // Táº¡o ra Ä‘á»‘i tÆ°á»£ng Address
        Address hanoi = Address.builder()
                                 .city(&quot;hanoi&quot;)
                                 .build();
        Address hatay = Address.builder()
                               .city(&quot;hatay&quot;)
                               .build();

        // Táº¡o ra Ä‘á»‘i tÆ°á»£ng person
        Person person1 = Person.builder()
                              .name(&quot;loda1&quot;)
                              .build();
        Person person2 = Person.builder()
                              .name(&quot;loda2&quot;)
                              .build();

        // set Persons vÃ o address
        hanoi.setPersons(Lists.newArrayList(person1, person2));
        hatay.setPersons(Lists.newArrayList(person1));

        // LÆ°u vÃ o db
        // ChÃºng ta chá»‰ cáº§n lÆ°u address, vÃ¬ cascade = CascadeType.ALL nÃªn nÃ³ sáº½ lÆ°u luÃ´n Person.
        addressRepository.saveAndFlush(hanoi);
        addressRepository.saveAndFlush(hatay);

        // VÃ o:http://localhost:8080/h2-console/ Ä‘á»ƒ xem dá»¯ liá»‡u Ä‘Ã£ insert

        Address queryResult = addressRepository.findById(1L).get();
        System.out.println(queryResult.getCity());
        System.out.println(queryResult.getPersons());

    }

}
// Output:
// hanoi
// [Person(id=2, name=loda1), Person(id=3, name=loda2)]
</code></pre>
<p>LÆ°u Ã½ á»Ÿ Ä‘Ã¢y chÃºng ta dÃ¹ngÂ <code>@Transactional</code>. ÄÃª khiáº¿n toÃ n bá»™ code cháº¡y trong hÃ m Ä‘á»u náº±m trongÂ <code>Session</code>Â quáº£n lÃ½ cá»§aÂ <code>Hibernate</code>.</p>
<p>Náº¿u khÃ´ng cÃ³Â <code>@Transactional</code>Â thÃ¬ viá»‡c báº¡n gá»iÂ <code>address.getPersons()</code>Â sáº½ bá»‹ lá»—i, vÃ¬ nÃ³ khÃ´ng thá»ƒ query xuá»‘ng database Ä‘á»ƒ láº¥y dá»¯ liá»‡u person lÃªn Ä‘Æ°á»£c. Báº¡n ghi nhá»› chá»— nÃ y nhÃ©.</p>
<p>Káº¿t quáº£ trong database lÃºc nÃ y:</p>
<p><code>Address</code></p>
<p>!image</p>
<p>!image</p>
<p>!image</p>
<p>BÃ i viáº¿t cá»§a mÃ¬nh khÃ´ng cÃ²n gÃ¬ Ä‘á»ƒ ngáº¯n hÆ¡n Ä‘Æ°á»£c ná»¯a :((( tháº­t há»• tháº¹n, mÃ¬nh cÃ³ up code lÃªn Ä‘Ã¢y, báº¡n cháº¡y code cÃ¡i lÃ  hiá»ƒu liá»n Ã :</p>
<p>ChÃºc cÃ¡c báº¡n há»c táº­p tháº­t tá»‘t! ahuu</p>
<ol>
<li><a href="">ğŸª‚ã€ŒJpaã€HÆ°á»›ng dáº«n sá»­ dá»¥ng @OneToOne</a></li>
<li><a href="">ğŸš…ã€ŒJpaã€HÆ°á»›ng dáº«n @OneToMany vÃ  @ManyToOne</a></li>
</ol>
<p>ğŸ’Â Náº¿u cÃ³, toÃ n bá»™ project / code máº«u Ä‘Æ°á»£c lÆ°u trá»¯ táº¡i <strong>GitHub</strong></p>
<p>ğŸŒŸÂ ÄÃ¢y lÃ  má»™t bÃ i viáº¿t trongÂ Series <strong>LÃ m chá»§ Spring Boot â€“ Zero to Hero</strong></p>
<h1 id="jpahÆ°á»›ng-dáº«n-query-phÃ¢n-trang-báº±ng-pageable-pháº§n-1"><a class="header" href="#jpahÆ°á»›ng-dáº«n-query-phÃ¢n-trang-báº±ng-pageable-pháº§n-1">ã€ŒJpaã€HÆ°á»›ng dáº«n Query phÃ¢n trang báº±ng Pageable (Pháº§n 1)</a></h1>
<ul>
<li>Giá»›i thiá»‡u</li>
<li>CÃ i Ä‘áº·t</li>
<li>Táº¡o Model vÃ  Repository</li>
<li>Pageable</li>
<li>Sorting</li>
<li>Note</li>
<li>VÃ­ dá»¥ DEMO</li>
<li>Káº¿t</li>
</ul>
<h3 id="giá»›i-thiá»‡u-5"><a class="header" href="#giá»›i-thiá»‡u-5"><strong>Giá»›i thiá»‡u</strong></a></h3>
<p>Äiá»u nÃ y cÃ³ láº½ ai cÅ©ng biáº¿t, Ä‘Ã³ lÃ  Ä‘a pháº§n chÃºng ta khÃ´ng láº¥y toÃ n bá»™ dá»¯ liá»‡u tá»« Database lÃªn, mÃ  chá»‰ láº¥y má»™t sá»‘ lÆ°á»£ng nháº¥t Ä‘á»‹nh, vÃ  chia nÃ³ thÃ nh nhiá»u trang.</p>
<p>MÃ  cÃ¡i blog nÃ y cÅ©ng lÃ  vÃ­ dá»¥ Ä‘iá»ƒn hÃ¬nh:</p>
<p>!image</p>
<p>TÃ´i chia dá»¯ liá»‡u thÃ nh nhiá»u trang khÃ¡c nhau, vá»›i má»—i trang thÃ¬ sáº½ láº¥y ra cÃ¡c bÃ i viáº¿t cáº§n thiáº¿t.</p>
<p>Táº¡o sao cáº§n dÃ¹ng phÃ¢n trang? vÃ¬ nÃ³ giÃºp tiáº¿t kiá»‡m bÄƒng thÃ´ng vÃ  tÄƒng tá»‘c xá»­ lÃ½, ngoÃ i ra nÃ³ cÅ©ng giáº£m thiá»ƒu viá»‡c hiá»ƒn thá»‹ cÃ¡c thÃ´ng tin thá»«a khÃ´ng cáº§n thiáº¿t.</p>
<p>ChÃºng ta sáº½ tÃ¬m hiá»ƒu cÃ¡c lÃ m viá»‡c nÃ y báº±ngÂ <code>JPA Pageable</code></p>
<p>Náº¿u chÆ°a biáº¿t Spring JPA thÃ¬ xem táº¡i Ä‘Ã¢y:</p>
<ol>
<li>Hibernate lÃ  gÃ¬?</li>
<li>Spring JPA</li>
</ol>
<h3 id="cÃ i-Ä‘áº·t-1"><a class="header" href="#cÃ i-Ä‘áº·t-1"><strong>CÃ i Ä‘áº·t</strong></a></h3>
<p>Nhá»› thÃªmÂ <code>spring-boot-starter-data-jpa</code>Â vÃ o dependencies cá»§a báº¡n.</p>
<p>Trong pháº§n nÃ y, tÃ´i xÃ i H2 database Ä‘á»ƒ demo. (h2 lÃ  dáº¡ng memory database, nÃ³ sáº½ lÆ°u trong ram vÃ  khi táº¯t chÆ°Æ¡ng trÃ¬nh nÃ³ sáº½ máº¥t sáº¡ch)</p>
<p><em>pom.xml</em></p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;packaging&gt;pom&lt;/packaging&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;2.0.5.RELEASE&lt;/version&gt;
        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;
    &lt;groupId&gt;me.loda.spring&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-learning&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;spring-boot-learning&lt;/name&gt;
    &lt;description&gt;Everything about Spring Boot&lt;/description&gt;

    &lt;properties&gt;
        &lt;java.version&gt;1.8&lt;/java.version&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;

        &lt;!--spring mvc, rest--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;!--spring jpa--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;!-- h2 database --&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;com.h2database&lt;/groupId&gt;
            &lt;artifactId&gt;h2&lt;/artifactId&gt;
            &lt;scope&gt;runtime&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;build&gt;
        &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
        &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

&lt;/project&gt;
</code></pre>
<p>Cáº¥u trÃºc thÆ° má»¥c:</p>
<p>!image</p>
<h3 id="táº¡o-model-vÃ -repository"><a class="header" href="#táº¡o-model-vÃ -repository"><strong>Táº¡o Model vÃ  Repository</strong></a></h3>
<p>Táº¡o ra classÂ <code>User</code>Â vÃ  insert sáºµn 100Â <code>User</code>Â vÃ o Database.</p>
<p><em>User.java</em></p>
<pre><code>@Entity
@Data
@Builder
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private String name;
}
</code></pre>
<p><em>UserRepository.java</em></p>
<pre><code>public interface UserRepository extends JpaRepository&lt;User, Long&gt; {

}
</code></pre>
<p><em>DatasourceConfig.java</em></p>
<pre><code>@Configuration
@RequiredArgsConstructor
public class DatasourceConfig {
    // inject bá»Ÿi RequiredArgsConstructor
    private final UserRepository userRepository;

    // Chá»‰ Ã¡p dá»¥ng trong demo :D
    @PostConstruct
    public void initData() {
        // Insert 100 User vÃ o H2 Database sau khi
        // DatasourceConfig Ä‘Æ°á»£c khá»Ÿi táº¡o
        userRepository.saveAll(IntStream.range(0, 100)
                                        .mapToObj(i -&gt; User.builder()
                                                           .name(&quot;name-&quot; + i)
                                                           .build())
                                        .collect(Collectors.toList())
        );
    }
}
</code></pre>
<h3 id="pageable"><a class="header" href="#pageable"><strong>Pageable</strong></a></h3>
<p>Ukie, giáº£ sá»­ bÃ¢y giá» chÃºng ta cÃ³ 100 record trong DB rá»“i.</p>
<p>Äá»ƒ cÃ³ thá»ƒ query láº¥y dá»¯ liá»‡u theo dáº¡ng Page,Â <strong>Spring Data JPA</strong>Â há»— trá»£ chÃºng ta báº±ng Ä‘á»‘i tÆ°á»£ngÂ <code>Pageable</code>.</p>
<p>HÃ mÂ <code>findAll(Pageable pageable)</code>Â lÃ  cÃ³ sáºµn vÃ  tráº£ vá» Ä‘á»‘i tÆ°á»£ngÂ <code>Page&lt;T&gt;</code></p>
<pre><code>// Láº¥y ra 5 user Ä‘áº§u tiÃªn
// PageRequest.of(0,5) tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i láº¥y ra page Ä‘áº§u tiÃªn, vÃ  má»—i page sáº½ cÃ³ 5 pháº§n tá»­
// PageRequest lÃ  má»™t Ä‘á»‘i tÆ°á»£ng káº¿ thá»«a Pageable
Page&lt;User&gt; page = userRepository.findAll(PageRequest.of(0, 5));
</code></pre>
<p>Äá»ƒ láº¥y ra 5Â <code>User</code>Â tiáº¿p theo, chÃºng ta cÃ³ thá»ƒ lÃ m theo 2 cÃ¡ch:</p>
<pre><code>// táº­n dá»¥ng Ä‘á»‘i tÆ°á»£ng Page trÆ°á»›c Ä‘Ã³
page.nextPageable()

// Sá»­ dá»¥ng PageRequest má»›i
PageRequest.of(1, 5)
</code></pre>
<h3 id="sorting"><a class="header" href="#sorting"><strong>Sorting</strong></a></h3>
<p>Báº¡n cÃ³ thá»ƒ query dáº¡ngÂ <code>Page</code>Â kÃ¨m theo yÃªu cáº§u sorting theo má»™t trÆ°á»ng nÃ o Ä‘Ã³.</p>
<pre><code>Page&lt;User&gt; page = userRepository.findAll(PageRequest.of(1, 5, Sort.by(&quot;name&quot;).descending()));
</code></pre>
<h3 id="note"><a class="header" href="#note"><strong>Note</strong></a></h3>
<p>NgoÃ i ra, báº¡n hoÃ n toÃ n cÃ³ thá»ƒ tá»± custom Ä‘á»ƒ hÃ m tráº£ vá»Â <code>Page&lt;T&gt;</code>,Â <code>Slice&lt;T&gt;</code>,Â <code>List&lt;T&gt;</code>.</p>
<pre><code>public interface UserRepository extends JpaRepository&lt;User, Long&gt; {
    List&lt;User&gt; findAllByNameLike(String name, Pageable pageable);
}
</code></pre>
<h3 id="vÃ­-dá»¥-demo"><a class="header" href="#vÃ­-dá»¥-demo"><strong>VÃ­ dá»¥ DEMO</strong></a></h3>
<pre><code>@SpringBootApplication
@RequiredArgsConstructor
public class App {
    public static void main(String[] args) {
        SpringApplication.run(App.class, args);
    }

    private final UserRepository userRepository;

    @Bean
    CommandLineRunner run() {
        return args -&gt; {
            // Láº¥y ra 5 user Ä‘áº§u tiÃªn
            // PageRequest.of(0,5) tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i láº¥y ra page Ä‘áº§u tiÃªn, vÃ  má»—i page sáº½ cÃ³ 5 pháº§n tá»­
            Page&lt;User&gt; page = userRepository.findAll(PageRequest.of(0, 5));
            // In ra 5 user Ä‘áº§u tiÃªn
            System.out.println(&quot;In ra 5 user Ä‘áº§u tiÃªn: &quot;);
            page.forEach(System.out::println);
            // Láº¥y ra 5 user tiáº¿p theo
            page = userRepository.findAll(page.nextPageable());

            System.out.println(&quot;In ra 5 user tiáº¿p theo: &quot;);
            page.forEach(System.out::println);

            System.out.println(&quot;In ra sá»‘ lÆ°á»£ng user á»Ÿ page hiá»‡n táº¡i: &quot; + page.getSize());
            System.out.println(&quot;In ra tá»•ng sá»‘ lÆ°á»£ng user: &quot; + page.getTotalElements());
            System.out.println(&quot;In ra tá»•ng sá»‘ page: &quot; + page.getTotalPages());

            // Láº¥y ra 5 user á»Ÿ page 1, sort theo tÃªn
            page = userRepository.findAll(PageRequest.of(1, 5, Sort.by(&quot;name&quot;).descending()));
            System.out.println(&quot;In ra 5 user page 1, sáº¯p xáº¿p theo name descending:&quot;);
            page.forEach(System.out::println);

            // Custom method
            List&lt;User&gt; list = userRepository.findAllByNameLike(&quot;name-%&quot;, PageRequest.of(0, 5));
            System.out.println(list);
        };
    }

}
</code></pre>
<p>Output:</p>
<pre><code>In ra 5 user Ä‘áº§u tiÃªn:
User(id=1, name=name-0)
User(id=2, name=name-1)
User(id=3, name=name-2)
User(id=4, name=name-3)
User(id=5, name=name-4)

In ra 5 user tiáº¿p theo:
User(id=6, name=name-5)
User(id=7, name=name-6)
User(id=8, name=name-7)
User(id=9, name=name-8)
User(id=10, name=name-9)

In ra sá»‘ lÆ°á»£ng user á»Ÿ page hiá»‡n táº¡i: 5
In ra tá»•ng sá»‘ lÆ°á»£ng user: 100
In ra tá»•ng sá»‘ page: 20

In ra 5 user page 1, sáº¯p xáº¿p theo name descending:
User(id=95, name=name-94)
User(id=94, name=name-93)
User(id=93, name=name-92)
User(id=92, name=name-91)
User(id=91, name=name-90)

Custom Method
[User(id=1, name=name-0), User(id=2, name=name-1), User(id=3, name=name-2), User(id=4, name=name-3), User(id=5, name=name-4)]
</code></pre>
<h3 id="káº¿t-1"><a class="header" href="#káº¿t-1"><strong>Káº¿t</strong></a></h3>
<p><code>Pageable</code>Â lÃ  má»™t cÃ¡ch tiáº¿p cáº­n ráº¥t tiá»‡n lá»£i, tuy nhiÃªn báº¡n cáº§n biáº¿t ráº±ng cÃ¡c hÃ m sá»­ dá»¥ngÂ <code>Pageable</code>Â sáº½ thá»±c hiá»‡n query 2 láº§n xuá»‘ng DB. Má»™t láº§n lÃ  Ä‘á»ƒ láº¥y ra tá»•ng sá»‘ lÆ°á»£ng báº£n ghi, má»™t láº§n lÃ  query láº¥y ra page báº¡n cáº§n. CÃ¡i nÃ y tÃ´i sáº½ nÃ³i kÄ© hÆ¡n á»Ÿ bÃ i sau Ä‘á»ƒ chÃºng ta tá»‘i Æ°u hiá»‡u nÄƒng</p>
<p>ğŸ’Â Náº¿u cÃ³, toÃ n bá»™ project / code máº«u Ä‘Æ°á»£c lÆ°u trá»¯ táº¡i <strong>GitHub</strong></p>
<p>ğŸŒŸÂ ÄÃ¢y lÃ  má»™t bÃ i viáº¿t trongÂ Series <strong>LÃ m chá»§ Spring Boot â€“ Zero to Hero</strong></p>
<h1 id="jpahÆ°á»›ng-dáº«n-sá»­-dá»¥ng-criteria-api-trong-hibernate"><a class="header" href="#jpahÆ°á»›ng-dáº«n-sá»­-dá»¥ng-criteria-api-trong-hibernate">ã€ŒJpaã€HÆ°á»›ng dáº«n sá»­ dá»¥ng Criteria API trong Hibernate</a></h1>
<p><code>JPA Criteria API</code>Â cho phÃ©p ta táº¡o ra cÃ¡c cÃ¢u truy váº¥n báº±ng Java Object thay vÃ¬ viá»‡c khai bÃ¡o trá»±c tiáº¿p trongÂ <code>String</code>Â (JPQL) nhÆ° tháº¿ nÃ y:</p>
<p>TÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i cÃ¢u lá»‡nh trÃªn nhÆ°ng xÃ¢y dá»±ng báº±ngÂ <code>Criteria API</code>Â thÃ¬ sáº½ nhÆ° nÃ y:</p>
<pre><code>CriteriaBuilder cb = em.getCriteriaBuilder();

CriteriaQuery&lt;Office&gt; q = cb.createQuery(Office.class);
Root&lt;Office&gt; c = q.from(Office.class);
q.select(c);
</code></pre>
<p>NhÃ¬n cÃ³ váº» dÃ i dÃ²ng vÃ  khÃ³ hiá»ƒu pháº£i khÃ´ng &gt;&quot;&lt; Yea, thÃ¬ Ä‘Ãºng lÃ  nhÆ° tháº¿ Ä‘áº¥y ==!</p>
<p>Náº¿u nÃ³ dÃ i dÃ²ng nhÆ° váº­y, táº¡i sao ngÆ°á»i ta láº¡i táº¡o ra vÃ  sá»­ dá»¥ng nÃ³ thay cho cÃ¢u lá»‡nhÂ <code>JPQL</code>Â bÃ¬nh thÆ°á»ng? CÃ¡c báº¡n Ä‘á»c pháº§n tiáº¿p theo sáº½ rÃµ nha.</p>
<h3 id="jpql-vs-criteria-api"><a class="header" href="#jpql-vs-criteria-api"><strong>JPQL vs Criteria API</strong></a></h3>
<p><code>JPQL</code>Â cÃ³ thá»ƒ lÃ m Ä‘áº§y Ä‘á»§ chá»©c nÄƒng chÃºng ta cáº§n chá»‰ vá»›i 1 cÃ¢u lá»‡nh, tuy nhiÃªn, chÃ­nh vÃ¬ Ä‘iá»u Ä‘Ã³, chÃºng ta thÆ°á»ng khÃ³ tÃ¹y biáº¿n hay sá»­ dá»¥ng láº¡i nÃ³, tháº­m chÃ­ khÃ³ kiá»ƒm soÃ¡t lá»—i cá»§a nÃ³ hÆ¡n. Vá»›i má»™t cÃ¢u lá»‡nh phá»©c táº¡p, chÃºng ta khÃ´ng biáº¿t Ä‘Æ°á»£c nÃ³ cÃ³ lá»—i hay khÃ´ng cho tá»›i khi cháº¡y chÆ°Æ¡ng trÃ¬nh hay debug (MÃ  chÆ°Æ¡ng trÃ¬nh Ä‘Ã£ cháº¡y Ä‘Æ°á»£c rá»“i thÃ¬ váº«n cÃ³ lá»—i tiá»m áº©n :v chá»i Ä‘áº­u).</p>
<p><code>Criteria API</code>Â thÃ¬ ngÆ°á»£c láº¡i, nÃ³ cho phÃ©p chÃºng ta xÃ¢y dá»±ng cÃ¢u lá»‡nh má»™t cÃ¡chÂ <code>Dynamic</code>, ráº¥t linh Ä‘á»™ng, vÃ  khÃ´ng bá»‹Â <code>hardcode</code>Â trong má»™tÂ <code>String</code>Â vÃ  cÃ³ thá»ƒÂ <code>tÃ¡i sá»­ dá»¥ng</code>Â láº¡i Ä‘Æ°á»£c. Äáº·c biá»‡t, vÃ¬ lÃ  Java Object, nÃªn chÃºng ta sáº½ biáº¿t má»™t cÃ¢u lá»‡nh bá»‹ lá»—i, khÃ´ng Ä‘Ãºng quy táº¯c ngay khi biÃªn dá»‹ch chÆ°Æ¡ng trÃ¬nh rá»“i.</p>
<p>TÃºm vÃ¡y láº¡i, vá»›i má»™t lá»‡nh Ä‘Æ¡n giáº£n nhÆ° vÃ­ dá»¥ Ä‘áº§u bÃ i, thÃ¬ cÃ¡c báº¡n nÃªn xÃ iÂ <code>JPQL</code>, cÃ²n vá»›i nhá»¯ng cÃ¢u lá»‡nh phá»©c há»£p, thay Ä‘á»•i theoÂ <code>context</code>Â cá»§a chÆ°Æ¡ng trÃ¬nh thÃ¬ nÃªn sá»­ dá»¥ngÂ <code>Criteria</code>.</p>
<h3 id="how-to-use"><a class="header" href="#how-to-use"><strong>How to use.</strong></a></h3>
<p>Quay trá»Ÿ láº¡i vá»›i vÃ­ dá»¥ ban Ä‘áº§u nhÃ©:</p>
<pre><code>CriteriaBuilder builder = em.getCriteriaBuilder();

CriteriaQuery&lt;Office&gt; query =  builder.createQuery(Office.class);
Root&lt;Office&gt; root = query.from(Office.class);
query.select(root);
</code></pre>
<p>ChÃºng ta cÃ¹ng tÃ¬m hiá»ƒu tá»«ng dÃ²ng lá»‡nh:</p>
<ul>
<li>
<p><code>CriteriaBuilder</code>: Äá»ƒ xÃ¢y dá»±ng má»™t cÃ¢u query, cÃ¡c báº¡n sáº½ cáº§n tá»›iÂ <code>interface``CriteriaBuilder</code>, má»¥c Ä‘Ã­ch cá»§a nÃ³ lÃ  giÃºp táº¡o ra Ä‘á»‘i tÆ°á»£ng chá»©a cÃ¢u lá»‡nh truy váº¥nÂ <code>CriteriaQuery</code>Â vÃ  cung cáº¥p cÆ¡ sá»‘ cÃ¡c phÃ©p biáº¿n Ä‘á»•i, phÃ©p logic, Ä‘iá»u kiá»‡n cho cÃ¢u lá»‡nh (and, or, not, avg, greater than,v.v...)</p>
</li>
<li>
<p><code>CriteriaQuery</code>: Äá»‘i tÆ°á»£ng chÃ­nh cá»§a chÃºng ta Ä‘Ã¢y, nÃ³ Ä‘Æ°á»£c táº¡o ra bá»ŸiÂ <code>builder.createQuery(Office.class)</code>. Má»¥c Ä‘Ã­ch lÃ  khai bÃ¡o Ä‘á»‘i tÆ°á»£ng báº¡n muá»‘n láº¥y ra sau khi thá»±c hiá»‡n query. NÃ³ tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i Ä‘oáº¡n ngoáº·c Ä‘Æ¡n á»Ÿ dÆ°á»›i Ä‘Ã¢y:</p>
</li>
<li>
<p><code>Root</code>: root lÃ  khai bÃ¡o Ä‘á»‘i tÆ°á»£ng báº¡n sáº½ sá»­ dá»¥ng trong query, tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i Ä‘á»‘i tÆ°á»£ng sau má»‡nh Ä‘á»Â <code>FROM</code></p>
</li>
</ul>
<p>Cuá»‘i cÃ¹ng, Ä‘á»ƒ hoÃ n thiá»‡n cÃ¢u lá»‡nhÂ <code>SELECT</code>Â chá»‰ Ä‘Æ¡n giáº£n lÃ  láº¥y Ä‘á»‘i tÆ°á»£ngÂ <code>CriteriaQuery</code>Â Ä‘Ã£ khai bÃ¡o lÃ  sá»­ dá»¥ng functionÂ <code>select</code>. Äá»‘i tÆ°á»£ng truyá»n vÃ o chÃ­nh lÃ  cÃ¡iÂ <code>root</code>Â (hay cÃ¡i Ä‘á»‘i tÆ°á»£ng cá»§aÂ <code>FROM</code>) kia.</p>
<p>TrÃ´ng váº­y chá»© cÅ©ng dá»… dá»… rá»“i Ä‘áº¥y nhá»‰ :)))</p>
<p>Okie, cÃ³ Ä‘iá»u nÃ y khÃ´ng biáº¿t Ä‘Ã£ báº¡n nÃ o Ä‘á»ƒ Ã½ chÆ°a ğŸ˜… chÃºng ta má»›i táº¡o ra cÃ¢u lá»‡nh, chá»© chÆ°a há» gá»i nÃ³ xuá»‘ngÂ <code>Database</code>Â ğŸ˜…</p>
<p>Äá»ƒ sá»­ dá»¥ng cÃ¢u lá»‡nh Ä‘Ã£ táº¡o, cÃ¡c báº¡n lÃ m giá»‘ng vá»›iÂ <code>JPQL</code>Â Ä‘Ã³ lÃ  sá»­ dá»¥ng Ä‘á»‘i tÆ°á»£ngÂ <code>EntityManager</code></p>
<pre><code>TypedQuery&lt;Office&gt; query = em.createQuery(query);
List&lt;Office&gt; results = query.getResultList();
</code></pre>
<p>Oh right, tháº¿ lÃ  implement xong vÃ­ dá»¥ Ä‘Æ¡n giáº£n Ä‘Ã¢u tiÃªn, khÃ´ng cÃ³a gÃ¬ khÃ³ khÄƒn ğŸ¤” (chÃ©m). BÃ¢y giá» thá»­ advanced lÃªn tÃ½ nhá»‰:</p>
<p>BÃ¢y giá» mÃ¬nh muá»‘n láº¥y táº¥t cáº£Â <code>Office</code>Â á»Ÿ thÃ nh phá»‘Â <code>hanoi</code>Â thÃ¬ sáº½ lÃ m nhÆ° nÃ o?</p>
<pre><code>SELECT o FROM Office o WHERE o.city = 'hanoi'
</code></pre>
<p>LÃºc nÃ y query cá»§a chÃºng ta sáº½ nhÆ° tháº¿ nÃ y:</p>
<pre><code>query.select(root).where(builder.equal(root.get(&quot;city&quot;), &quot;hanoi&quot;));
</code></pre>
<p>CÃ¡c báº¡n Ä‘á»ƒ Ã½ Ä‘oáº¡n nÃ y nhÃ©. MÃ¬nh sá»­Â <code>builder</code>Â Ä‘á»ƒ láº¥y hÃ mÂ <code>equal</code>Â (phÃ©p toÃ¡n logic, nhÆ° mÃ¬nh Ä‘á» cáº­p á»Ÿ trÃªn, chuáº©n chÆ°a nÃ o). Tiáº¿p tá»›i lÃ  cÃ¡iÂ <code>root.get(&quot;city&quot;)</code>,Â <code>root</code>Â chÃ­nh lÃ  Ä‘á»‘i tÆ°á»£ng chÃºng ta Ä‘Ã£ khai bÃ¡o, bÃ¢y giá» chÃºng ta sáº½ láº¥y trÆ°á»ngÂ <code>city</code>Â cá»§a nÃ³ vÃ  kiá»ƒm tra nÃ³ vá»›iÂ <code>hanoi</code>.</p>
<p>CÃ³ thá»ƒ nÃ³iÂ <code>Criteria API</code>Â Ä‘Ã£ hiá»‡n thá»±c hÃ³a ráº¥t thÃ nh cÃ´ng cÃ¢u lá»‡nh JPQL (hay HQL) thÃ nh nhá»¯ng api java cá»±c kÃ¬ dá»… dá»c, dá»… hiá»ƒu vÃ  dá»… sá»­ dá»¥ng. Khi Ä‘Ã£ hiá»ƒu Ä‘Æ°á»£c cÃ¢u lá»‡nh gá»‘c, báº¡n cÃ³ thá»ƒ dá»… dÃ ng chuyá»ƒn nÃ³ thÃ nhÂ <code>Criteria</code>Â vÃ  ngÆ°á»£c láº¡i.</p>
<p>Trong bÃ i viáº¿t tá»›i á»Ÿ chÆ°Æ¡ngÂ <code>Spring</code>, mÃ¬nh sáº½ hÆ°á»›ng dáº«n cÃ¡c báº¡n sá»­ dá»¥ng tá»›iÂ <code>Specifications</code>Â káº¿t há»£pÂ <code>Criteria API</code>Â Ä‘á»ƒ táº¡o ra má»™t vá»¥ ná»• khi giao tiáº¿p vá»›i db báº±ngÂ <code>Java</code>Â (vÃ£i cáº£ chÃ©m ğŸ˜‚)</p>
<p>ChÃºc cÃ¡c báº¡n sá»­ dá»¥ng thÃ nh cÃ´ngÂ <code>Criteria API</code>Â vÃ  Ä‘á»«ng quÃªn like or chia sáº» bÃ i viáº¿t cho báº¡n bÃ¨ hihi, cáº£m Æ¡n cÃ¡c báº¡n Ä‘Ã£ theo dÃµi!</p>
<p>ğŸ’Â Náº¿u cÃ³, toÃ n bá»™ project / code máº«u Ä‘Æ°á»£c lÆ°u trá»¯ táº¡i <strong>GitHub</strong></p>
<p>ğŸŒŸÂ ÄÃ¢y lÃ  má»™t bÃ i viáº¿t trongÂ Series <strong>LÃ m chá»§ Spring Boot â€“ Zero to Hero</strong></p>
<h1 id="jpahÆ°á»›ng-dáº«n-sá»­-dá»¥ng-criteria-api-trong-hibernate-pháº§n-2"><a class="header" href="#jpahÆ°á»›ng-dáº«n-sá»­-dá»¥ng-criteria-api-trong-hibernate-pháº§n-2">ã€ŒJpaã€HÆ°á»›ng dáº«n sá»­ dá»¥ng Criteria API trong Hibernate (Pháº§n 2)</a></h1>
<ul>
<li>Giá»›i thiá»‡u</li>
<li>CÃ i Ä‘áº·t</li>
<li>JPA Meta Model</li>
<li>Predicate</li>
</ul>
<h3 id="giá»›i-thiá»‡u-6"><a class="header" href="#giá»›i-thiá»‡u-6"><strong>Giá»›i thiá»‡u</strong></a></h3>
<p>Trong bÃ i viáº¿t trÆ°á»›c, tÃ´i Ä‘Ã£ giá»›i thiá»‡u vá»›i cÃ¡c báº¡n vá»Â <strong>Criteria API</strong>Â cá»§aÂ <strong>Hibernate</strong>.</p>
<ol>
<li>Hibernate lÃ  gÃ¬?</li>
<li>HÆ°á»›ng dáº«n sá»­ dá»¥ng Criteria API trong Hibernate</li>
</ol>
<p>Trong pháº§n nÃ y chÃºng ta sáº½ tÃ¬m hiá»ƒu má»™t sá»‘ cÃ¡c pháº§n cáº§n thiáº¿t khÃ¡c trongÂ <strong>Criteria API</strong>, thá»© giÃºp cho báº¡n xÃ¢y dá»±ng query má»™t cÃ¡ch Ä‘Æ¡n giáº£n hÆ¡n.</p>
<p>Trong bÃ i cÃ³ sá»­ dá»¥ng:</p>
<ol>
<li>Lombok</li>
</ol>
<h3 id="cÃ i-Ä‘áº·t-2"><a class="header" href="#cÃ i-Ä‘áº·t-2"><strong>CÃ i Ä‘áº·t</strong></a></h3>
<p>Nhá»› thÃªmÂ <code>spring-boot-starter-data-jpa</code>Â vÃ o dependencies cá»§a báº¡n.</p>
<p>Trong pháº§n nÃ y, tÃ´i xÃ iÂ <em>H2 database</em>Â Ä‘á»ƒ demo. (H2 lÃ  dáº¡ng memory database, nÃ³ sáº½ lÆ°u trong ram vÃ  khi táº¯t chÆ°Æ¡ng trÃ¬nh nÃ³ sáº½ máº¥t sáº¡ch)</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;projectxmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&lt;parent&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&lt;version&gt;2.0.5.RELEASE&lt;/version&gt;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
	&lt;/parent&gt;&lt;groupId&gt;me.loda.spring&lt;/groupId&gt;&lt;artifactId&gt;example-independent-maven-spring-project&lt;/artifactId&gt;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&lt;name&gt;example-independent-maven-spring-project&lt;/name&gt;&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;&lt;properties&gt;&lt;java.version&gt;1.8&lt;/java.version&gt;&lt;/properties&gt;&lt;dependencies&gt;&lt;dependency&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;&lt;scope&gt;runtime&lt;/scope&gt;&lt;optional&gt;true&lt;/optional&gt;&lt;/dependency&gt;&lt;dependency&gt;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&lt;optional&gt;true&lt;/optional&gt;&lt;/dependency&gt;&lt;dependency&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&lt;scope&gt;test&lt;/scope&gt;&lt;!--			&lt;exclusions&gt;--&gt;
			&lt;!--				&lt;exclusion&gt;--&gt;
			&lt;!--					&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;--&gt;
			&lt;!--					&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;--&gt;
			&lt;!--				&lt;/exclusion&gt;--&gt;
			&lt;!--			&lt;/exclusions&gt;--&gt;
		&lt;/dependency&gt;&lt;!--spring jpa--&gt;
		&lt;dependency&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&lt;/dependency&gt;&lt;!--in memory database--&gt;
		&lt;dependency&gt;&lt;groupId&gt;com.h2database&lt;/groupId&gt;&lt;artifactId&gt;h2&lt;/artifactId&gt;&lt;scope&gt;runtime&lt;/scope&gt;&lt;/dependency&gt;&lt;!--https://mvnrepository.com/artifact/org.hibernate/hibernate-jpamodelgen --&gt;
		&lt;dependency&gt;&lt;groupId&gt;org.hibernate&lt;/groupId&gt;&lt;artifactId&gt;hibernate-jpamodelgen&lt;/artifactId&gt;&lt;version&gt;5.4.9.Final&lt;/version&gt;&lt;scope&gt;provided&lt;/scope&gt;&lt;/dependency&gt;&lt;/dependencies&gt;&lt;build&gt;&lt;plugins&gt;&lt;plugin&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&lt;/plugin&gt;&lt;/plugins&gt;&lt;/build&gt;&lt;/project&gt;
</code></pre>
<p>Äáº·c biá»‡t, chÃº Ã½Â <code>hibernate-jpamodelgen</code>, tÃ´i sáº½ giáº£i thÃ­ch tÃ¡c dá»¥ng cá»§a nÃ³ trÆ°á»›c.</p>
<h3 id="jpa-meta-model"><a class="header" href="#jpa-meta-model"><strong>JPA Meta Model</strong></a></h3>
<p>trongÂ bÃ i trÆ°á»›cÂ má»i ngÆ°á»i cÅ©ng biáº¿t cÃ¡ch cáº¥u trÃºc cá»§a má»™t cÃ¢u query trong Criteria API:</p>
<pre><code>SELECT o FROM Office o WHERE o.city = 'hanoi'
</code></pre>
<p>LÃºc nÃ y query cá»§a chÃºng ta sáº½ nhÆ° tháº¿ nÃ y:</p>
<pre><code>query.select(root).where(builder.equal(root.get(&quot;city&quot;), &quot;hanoi&quot;));
</code></pre>
<p>Äá»ƒ Ã½ thÃ¬ cÃ³ thá»ƒ tháº¥y, khi muá»‘n láº¥y columnÂ <code>city</code>Â Ä‘á»ƒ kiá»ƒm tra, chÃºng ta Ä‘ang hardcode báº±ngÂ <code>String</code>.</p>
<p>CÃ³ má»™t sá»‘ báº¥t lá»£i khi lÃ m váº­y, thá»© nháº¥t lÃ  báº¡n pháº£i tá»± nhá»› tÃªn cÃ¡c column má»—i khi gá»i, thá»© hai lÃ  báº¡n sáº½ pháº£i tÃ¬m kiáº¿m táº¥t cáº£ cÃ¡c chá»— sá»­ dá»¥ng má»—i sá»­a Ä‘á»•i tÃªn cá»™t.</p>
<p>CÃ¡ch giáº£i quyáº¿t hay nháº¥t lÃ  tham chiáº¿u tÃªn cÃ¡c column cá»§aÂ <strong>Table</strong>Â vÃ o má»™tÂ <strong>Object</strong>Â Ä‘á»ƒ chÃºng ta cÃ³ thá»ƒ gá»i tá»›i má»—i khi sá»­ dá»¥ng. Khi cÃ³ sá»± thay Ä‘á»•i, chá»‰ cáº§n thay Ä‘á»•i trong Ä‘á»‘i tÆ°á»£ng nÃ y lÃ  xong. Äá»‘i tÆ°á»£ng biá»ƒu diá»…n nÃ y Ä‘Æ°á»£c gá»i lÃ Â <strong>Meta Model</strong>.</p>
<p>VÃ  ráº¥t may lÃ  Hibernate há»— trá»£ chÃºng ta tá»± Ä‘á»™ng generate ra cÃ¡c Meta Model tá»« cÃ¡c classÂ <code>@Entity</code></p>
<p>VÃ­ dá»¥:</p>
<p>ChÃºng ta cÃ³ Class EntityÂ <code>User</code></p>
<p><em>User.java</em></p>
<pre><code>@Entity
@Data
@Builder
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private UserType type;
    private String name;

    public enum UserType {
        NORMAL, VIP;
    }
}
</code></pre>
<p>ThÃ¬ class Meta Model cá»§aÂ <code>User</code>Â sáº½ tÃªn lÃ Â <code>User_</code>Â vÃ  cÃ³ cáº¥u trÃºc nhÆ° sau:</p>
<pre><code>@Generated(value = &quot;org.hibernate.jpamodelgen.JPAMetaModelEntityProcessor&quot;)
@StaticMetamodel(User.class)
public abstract class User_ {

	public static volatile SingularAttribute&lt;User, String&gt; name;
	public static volatile SingularAttribute&lt;User, Long&gt; id;
	public static volatile SingularAttribute&lt;User, UserType&gt; type;

	public static final String NAME = &quot;name&quot;;
	public static final String ID = &quot;id&quot;;
	public static final String TYPE = &quot;type&quot;;

}
</code></pre>
<p>Äá»ƒ cÃ³ thá»ƒ Generate ra cÃ¡c class Meta Model, báº¡n sáº½ cáº§n thÃªm dependencyÂ <code>hibernate-jpamodelgen</code>Â vÃ o project cá»§a mÃ¬nh.</p>
<pre><code>&lt;dependency&gt;&lt;groupId&gt;org.hibernate&lt;/groupId&gt;&lt;artifactId&gt;hibernate-jpamodelgen&lt;/artifactId&gt;&lt;version&gt;CURRENT-VERSION&lt;/version&gt;&lt;/dependency&gt;
</code></pre>
<p>Khi build jar nÃ³ sáº½ tá»± Ä‘á»™ng generate thÃªm cho báº¡n</p>
<p>Äá»ƒ cÃ³ thá»ƒ sá»­ dá»¥ng trong IDE, báº¡n cÃ³ thá»ƒ Config Annotation Processor (Giá»‘ng vá»›i Lombok), Ä‘á»ƒ IDE hiá»ƒu vÃ  tá»± Ä‘á»™ng generate ra giÃºp báº¡n láº­p trÃ¬nh dá»… hÆ¡n.</p>
<p>!image</p>
<h3 id="predicate"><a class="header" href="#predicate"><strong>Predicate</strong></a></h3>
<p>Äá»ƒ cÃ³ thá»ƒ xÃ¢y dá»±ng cÃ¢u truy váº¥n má»™t cÃ¡ch trá»n váº¹n, báº¡n cáº§n biáº¿tÂ <code>Predicate</code>.</p>
<p>Táº¡m hiá»ƒu má»™t cÃ¡ch Ä‘Æ¡n giáº£n thÃ¬Â <code>Predicate</code>Â lÃ  má»™t má»‡nh Ä‘á» Ä‘iá»u kiá»‡n trong cÃ¢u lá»‡nh truy váº¥n.</p>
<p>NhÆ° vÃ­ dá»¥ á»Ÿ dÆ°á»›i Ä‘Ã¢y:</p>
<pre><code>@Repository
public class CustomUserRepository {

    @PersistenceContext
    private EntityManager em;

    public User getUserById(Long id) {
        CriteriaBuilder builder = em.getCriteriaBuilder();
        CriteriaQuery&lt;User&gt; query = builder.createQuery(User.class);
        Root&lt;User&gt; root = query.from(User.class);

        Predicate condition = builder.equal(root.get(User_.ID), id);

        query.select(root).where(condition);

        return em.createQuery(query).getSingleResult();
    }
}
</code></pre>
<p><code>Predicate</code>Â cÃ³ thá»ƒ liÃªn káº¿t vá»›i nhau báº±ng cÃ¡c phÃ©p quan há»‡Â <code>and</code>,Â <code>or</code>,Â <code>not</code>, v.v..</p>
<p>VÃ­ dá»¥:</p>
<pre><code>    public Collection&lt;User&gt; getUserByComplexConditions(String name, UserType type) {
        CriteriaBuilder builder = em.getCriteriaBuilder();
        CriteriaQuery&lt;User&gt; query = builder.createQuery(User.class);
        Root&lt;User&gt; root = query.from(User.class);

        Predicate hasNameLike = builder.like(root.get(User_.NAME), name);
        Predicate hasType = builder.equal(root.get(User_.TYPE), type);

        Predicate condition = builder.and(hasNameLike, hasType);

        query.select(root).where(condition);
        return em.createQuery(query).getResultList();
    }
</code></pre>
<p>Tá»›i Ä‘Ã¢y báº¡n Ä‘Ã£ náº¯m Ä‘Æ°á»£c cÆ¡ báº£nÂ <strong>Criteria API</strong>Â vÃ  Ä‘Ã£ cÃ³ thá»ƒ tá»± sá»­ dá»¥ng nÃ³ trong Ä‘a sá»‘ cÃ¡c cÃ¢u lá»‡nh Ä‘Æ¡n giáº£n.</p>
<p>Trong bÃ i tiáº¿p theo, tÃ´i sáº½ hÆ°á»›ng dáº«n ná»‘t cÃ¡c join báº£ng ná»¯a thÃ´i lÃ  báº¡n sáº½ mas con Ã´ng ter.</p>
<p>ğŸ’Â Náº¿u cÃ³, toÃ n bá»™ project / code máº«u Ä‘Æ°á»£c lÆ°u trá»¯ táº¡i <strong>GitHub</strong></p>
<p>ğŸŒŸÂ ÄÃ¢y lÃ  má»™t bÃ i viáº¿t trongÂ Series <strong>LÃ m chá»§ Spring Boot â€“ Zero to Hero</strong></p>
<h1 id="jpahÆ°á»›ng-dáº«n-tá»±-táº¡o-validator-Ä‘á»ƒ-kiá»ƒm-tra-model--entity"><a class="header" href="#jpahÆ°á»›ng-dáº«n-tá»±-táº¡o-validator-Ä‘á»ƒ-kiá»ƒm-tra-model--entity">ã€ŒJpaã€HÆ°á»›ng dáº«n tá»± táº¡o Validator Ä‘á»ƒ kiá»ƒm tra Model &amp; Entity</a></h1>
<ul>
<li>Giá»›i thiá»‡u</li>
<li>CÃ i Ä‘áº·t</li>
<li>Prepare</li>
<li>Táº¡o Annotation</li>
<li>Táº¡o Validator</li>
<li>Cháº¡y thá»­</li>
<li>Káº¿t</li>
</ul>
<h3 id="giá»›i-thiá»‡u-7"><a class="header" href="#giá»›i-thiá»‡u-7"><strong>Giá»›i thiá»‡u</strong></a></h3>
<p>Báº£n thÃ¢n Hibernate vÃ  Java Ä‘Ã£ cung cáº¥p cho chÃºng ta ráº¥t nhiá»u cÃ¡c Annotation Ä‘á»ƒ validate dá»¯ liá»‡u cá»§a model.</p>
<p>Cháº³ng háº¡n nhÆ°:Â <code>@@NotBlank</code>,Â <code>@Size</code>,Â <code>@Email</code>, v.v..</p>
<p>Tuy nhiÃªn, trÃªn thá»±c táº¿, chÃºng ta cÃ³ ráº¥t nhiá»u cÃ¡c Ä‘iá»u kiá»‡n Ä‘Æ°á»£c Ä‘áº·t ra, tuá»³ thuá»™c vÃ o business vÃ  mÃ´ hÃ¬nh dá»± Ã¡n.</p>
<p>VÃ­ dá»¥ nhÆ° trong dá»± Ã¡n cá»§a tÃ´i, tÃ´i muá»‘n táº¥t cáº£Â <code>User</code>Â Ä‘á»u pháº£i cÃ³ má»™t thuá»™c tÃ­nh lÃ Â <code>lodaId</code>.</p>
<p>Má»™tÂ <code>lodaId</code>Â há»£p lá»‡ lÃ  chuá»—i String cÃ³ tiá»n tá»‘:Â <code>loda://xxxx</code></p>
<p>LÃºc nÃ y, lÃ m sao Ä‘á»ƒ tÃ´i cháº¯c cháº¯n Ä‘Æ°á»£c ráº±ng má»iÂ <code>User</code>Â trÆ°á»›c khi táº¡o Ä‘á»u pháº£i cÃ³Â <code>lodaId</code>Â há»£p lá»‡?</p>
<p>RÃµ rÃ ng tÃ´i pháº£i tá»± táº¡o ra má»™t bá»™ kiá»ƒm tra cho riÃªng mÃ¬nh Ä‘á»ƒ kiá»ƒm soÃ¡t tÃ­nh há»£p lá»‡ cá»§aÂ <code>User</code>.</p>
<p>Ráº¥t may,Â <code>hibernate-validator</code>Â sáº½ giÃºp tÃ´i lÃ m Ä‘iá»u Ä‘Ã³.</p>
<p>Trong bÃ i cÃ³ sá»­ dá»¥ng cÃ¡c kiáº¿n thá»©c:</p>
<ol>
<li>Spring Boot</li>
<li>jpa</li>
<li>lombok</li>
</ol>
<h3 id="cÃ i-Ä‘áº·t-3"><a class="header" href="#cÃ i-Ä‘áº·t-3"><strong>CÃ i Ä‘áº·t</strong></a></h3>
<p><em>pom.xml</em></p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;projectxmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&lt;parent&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&lt;version&gt;2.0.5.RELEASE&lt;/version&gt;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
	&lt;/parent&gt;&lt;groupId&gt;me.loda.spring&lt;/groupId&gt;&lt;artifactId&gt;example-independent-maven-spring-project&lt;/artifactId&gt;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&lt;name&gt;example-independent-maven-spring-project&lt;/name&gt;&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;&lt;properties&gt;&lt;java.version&gt;1.8&lt;/java.version&gt;&lt;/properties&gt;&lt;dependencies&gt;&lt;dependency&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;&lt;scope&gt;runtime&lt;/scope&gt;&lt;optional&gt;true&lt;/optional&gt;&lt;/dependency&gt;&lt;dependency&gt;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&lt;optional&gt;true&lt;/optional&gt;&lt;/dependency&gt;&lt;dependency&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;&lt;!--https://mvnrepository.com/artifact/org.hibernate/hibernate-validator --&gt;
        &lt;dependency&gt;&lt;groupId&gt;org.hibernate&lt;/groupId&gt;&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;&lt;version&gt;6.1.0.Final&lt;/version&gt;&lt;/dependency&gt;&lt;/dependencies&gt;&lt;build&gt;&lt;plugins&gt;&lt;plugin&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&lt;/plugin&gt;&lt;/plugins&gt;&lt;/build&gt;&lt;/project&gt;
</code></pre>
<h3 id="prepare"><a class="header" href="#prepare"><strong>Prepare</strong></a></h3>
<p>TrÆ°á»›c khi táº¡o ra má»™t bá»™ Validator cho riÃªng mÃ¬nh, chÃºng ta táº¡o ra cÃ¡c thÃ nh pháº§n chÃ­nh.</p>
<p>Táº¡o ra modelÂ <code>User</code></p>
<p><em>User.java</em></p>
<pre><code>@Data
public class User {
    private String lodaId;
}
</code></pre>
<p>Táº¡o Controller giao tiáº¿p vá»›i client.</p>
<p><em>UserController.java</em></p>
<pre><code>@RestController
@RequestMapping(&quot;api/v1/users&quot;)
public class UserController {

    /*
        ÄÃ¡nh dáº¥u object vá»›i @Valid Ä‘á»ƒ validator tá»± Ä‘á»™ng kiá»ƒm tra object Ä‘Ã³ cÃ³ há»£p lá»‡ hay khÃ´ng
     */
    @PostMapping
    public Object createUser(@Valid @RequestBody User user) {
        return user;
    }

}
</code></pre>
<h3 id="táº¡o-annotation"><a class="header" href="#táº¡o-annotation"><strong>Táº¡o Annotation</strong></a></h3>
<p>Äá»ƒ táº¡o ra má»™t validator vá»›i Hibernate-Validator, chÃºng ta cáº§n khai bÃ¡o má»™t annotation má»›i.</p>
<p>á» Ä‘Ã¢y, tÃ´i táº¡o ra má»™t Annotation cá»§a chÃ­nh mÃ¬nh nhÆ° sau:</p>
<pre><code>/**
 * Khai bÃ¡o má»™t custom annotation
 */
@Documented
@Constraint(validatedBy = LodaIdValidator.class)
@Target({ElementType.METHOD, ElementType.FIELD})
@Retention(RetentionPolicy.RUNTIME)
public @interface LodaId {
    // trÆ°á»ng message lÃ  báº¯t buá»™c, khai bÃ¡o ná»™i dung sáº½ tráº£ vá» khi field k há»£p lá»‡
    String message() default &quot;LodaId must start with loda://&quot;;
    // CÃ¡i nÃ y lÃ  báº¯t buá»™c pháº£i cÃ³ Ä‘á»ƒ Hibernate Validator cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng
    Class&lt;?&gt;[] groups() default {};
    // CÃ¡i nÃ y lÃ  báº¯t buá»™c pháº£i cÃ³ Ä‘á»ƒ Hibernate Validator cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng
    Class&lt;? extends Payload&gt;[] payload() default {};
}
</code></pre>
<p>Váº­y lÃ  xong, giá» chá»‰ cáº§n gáº¯nÂ <code>@LodaId</code>Â lÃªn trÆ°á»ng nÃ o cáº§n kiá»ƒm tra tÃ­nh há»£p lá»‡.</p>
<pre><code>@Data
public class User {
    // ÄÃ¡nh dáº¥u field lodaId sáº½ cáº§n validate bá»Ÿi @LodaId
    @LodaId
    private String lodaId;
}
</code></pre>
<h3 id="táº¡o-validator"><a class="header" href="#táº¡o-validator"><strong>Táº¡o Validator</strong></a></h3>
<p>Sau khi Ä‘Ã£ táº¡o raÂ <code>@LodaId</code>, chÃºng ta cáº§n táº¡o ra bá»™ kiá»ƒm tra cho Annotation nÃ y.</p>
<p>Ráº¥t Ä‘Æ¡n giáº£n, báº¡n chá»‰ cáº§n káº¿ thá»«a lá»›pÂ <code>ConstraintValidator</code>Â cá»§a Hibernate Validator</p>
<pre><code>import javax.validation.ConstraintValidator;
import javax.validation.ConstraintValidatorContext;

public class LodaIdValidator implements ConstraintValidator&lt;LodaId, String&gt; {
    private static final String LODA_PREFIX = &quot;loda://&quot;;

    /**
     * Kiá»ƒm tra tÃ­nh há»£p lá»‡ cá»§a trÆ°á»ng Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u bá»Ÿi @LodaId
     * @param s
     * @param constraintValidatorContext
     * @return
     */
    @Override
    public boolean isValid(String s, ConstraintValidatorContext constraintValidatorContext) {
        if (s == null || s.isEmpty()) return false;

        return s.startsWith(LODA_PREFIX);
    }
}
</code></pre>
<h3 id="cháº¡y-thá»­-3"><a class="header" href="#cháº¡y-thá»­-3"><strong>Cháº¡y thá»­</strong></a></h3>
<p>Request má»™tÂ <code>User</code>Â há»£p lá»‡:</p>
<pre><code>{
	&quot;lodaId&quot;: &quot;loda://user_1&quot;
}
</code></pre>
<p>tráº£ vá» thÃ nh cÃ´ngÂ <code>200</code>.</p>
<p>!image</p>
<p>Request má»™tÂ <code>User</code>Â khÃ´ng há»£p lá»‡:</p>
<pre><code>{
	&quot;lodaId&quot;: &quot;Laula://user_1&quot;
}
</code></pre>
<p>Tráº£ vá» tháº¥t báº¡i, Bad RequestÂ <code>400</code>.</p>
<p>!image</p>
<pre><code>{
    &quot;timestamp&quot;: &quot;2019-12-19T10:26:14.554+0000&quot;,
    &quot;status&quot;: 400,
    &quot;error&quot;: &quot;Bad Request&quot;,
    &quot;errors&quot;: [
        {
            &quot;codes&quot;: [
                &quot;LodaId.user.lodaId&quot;,
                &quot;LodaId.lodaId&quot;,
                &quot;LodaId.java.lang.String&quot;,
                &quot;LodaId&quot;
            ],
            &quot;arguments&quot;: [
                {
                    &quot;codes&quot;: [
                        &quot;user.lodaId&quot;,
                        &quot;lodaId&quot;
                    ],
                    &quot;arguments&quot;: null,
                    &quot;defaultMessage&quot;: &quot;lodaId&quot;,
                    &quot;code&quot;: &quot;lodaId&quot;
                }
            ],
            &quot;defaultMessage&quot;: &quot;LodaId must start with loda://&quot;,
            &quot;objectName&quot;: &quot;user&quot;,
            &quot;field&quot;: &quot;lodaId&quot;,
            &quot;rejectedValue&quot;: &quot;Laula://user_1&quot;,
            &quot;bindingFailure&quot;: false,
            &quot;code&quot;: &quot;LodaId&quot;
        }
    ],
    &quot;message&quot;: &quot;Validation failed for object='user'. Error count: 1&quot;,
    &quot;path&quot;: &quot;/api/v1/users&quot;
}
</code></pre>
<h3 id="káº¿t-2"><a class="header" href="#káº¿t-2"><strong>Káº¿t</strong></a></h3>
<p>Ráº¥t Ä‘Æ¡n giáº£n Ä‘á»ƒ cÃ³ thá»ƒ tá»± táº¡o ra cho mÃ¬nh cÃ¡c Validator vá»›iÂ <code>Hibernate-Validator</code>. NÃ³ sáº½ giÃºp báº¡n tiáº¿t kiá»‡m ráº¥t nhiá»u thá»i gian.</p>
<p>ğŸ’Â Náº¿u cÃ³, toÃ n bá»™ project / code máº«u Ä‘Æ°á»£c lÆ°u trá»¯ táº¡i <strong>GitHub</strong></p>
<p>ğŸŒŸÂ ÄÃ¢y lÃ  má»™t bÃ i viáº¿t trongÂ Series <strong>LÃ m chá»§ Spring Boot â€“ Zero to Hero</strong></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../spring-boot/spring-boot.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../spring-boot/ss.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../spring-boot/spring-boot.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../spring-boot/ss.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
